<h1>PHP Annotations</h1><div>PHP annotations is a type of method injection for service methods.<br>It's similar to a <a href="https://wiki.python.org/moin/PythonDecorators#What_is_a_Decorator" target="_blank">Python Decorators</a>&nbsp;or <a href="http://tutorials.jenkov.com/java-reflection/annotations.html" target="_blank">Java Annotations</a>.</div><div>It uses <a href="http://php.net/manual/en/reflectionfunctionabstract.getdoccomment.php" target="_blank">PHP' Reflection getDocComment</a>&nbsp;method to retrieve data in the comment section above declared method and class.</div><div><br></div><div>The block comment needs to start with slash + double asterisk, and the annotation names follows the atmark (@).<br></div><pre>/**
@someannotation {"parameters":1}
*/</pre><h2>Custom annotation</h2><div>To add custom annotation you can use the function <b>add_annotation_callback($annotationName, $callback)</b>.</div><div>Have a look at the script <b>/api/slikland/core/annotation.php</b>.</div><pre>class someclass{
<span class="Apple-tab-span" style="white-space:pre">	</span>function method($data, &amp;$params){
<span class="Apple-tab-span" style="white-space:pre">		</span>//$data holds the parameters passed in the annotation
<span class="Apple-tab-span" style="white-space:pre">		</span>//$params are the parameters the ServiceController uses. Use reference with &amp; to be able to update those data.
<span class="Apple-tab-span" style="white-space:pre">	</span>}
}
add_annotation_callback('someannotation', array('someclass', 'method'));<br></pre><h2>Annotations</h2><h3>@method STRING<br></h3><div>The method annotation tells what HTTP method data it should accept.</div><div>Use this for security reason, instead of leaving it in blank, use POST so it won't accept variables set in URL Vars.</div><div><br></div><h3>@params [Array of strings]</h3><div>This annotation adds predefined parameters to the service&nbsp;<b>$data</b>&nbsp;variable.<br></div><div><br></div><h3>@validate Json format object<br></h3><div>This adds validation for the incoming data.</div><div>If the validation fails, it throws an Error with validation_error code and the fields that failed validation.</div><div><br></div><div>The validation methods are in /api/validation/ directory in the deploy folder.<br><br></div><h3><b>@output STRING</b></h3><div>The output annotation tells the type of output it gives.</div><div>For now we have <b>html</b>, <b>download</b>, <b>json</b>, <b>text</b>&nbsp;formats.</div><div>For <b>download</b>&nbsp;type, you can also set <b>@filename SomeName.ext</b>&nbsp;annotation so you can name the output file.</div><div><br></div><h3>@log JSON Format Object</h3><div>Sets log data to be logged in the CMS log table.</div>