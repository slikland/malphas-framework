(function(){var Debug,__slice=[].slice;Debug=function(){function Debug(){}return Debug.debug=!1,Debug.light=4764196,Debug.dark=2884445,Debug.init=function(){var err,re,_ref;Debug._console=window.console;try{Debug._log=Function.prototype.bind.call(null!=(_ref=Debug._console)?_ref.log:void 0,Debug._console)}catch(_error){err=_error}return null==window.Debug&&(window.Debug=Debug),Debug.check()||eval("window[Math.random()]()"),re=new RegExp(/debug=(1|true)/i),Debug.debug=re.test(window.location.search),re=new RegExp(/debug=(0|false)/i),Debug.debug||re.test(window.location.search)||(re=new RegExp(/([\.|\/]local\.|localhost|127\.0\.0\.1|192\.\d+\.\d+\.\d+|dev\.slikland\.)/i),Debug.debug=re.test(window.location.href)),Debug.debug&&window.console?void 0:window.console={assert:function(){},clear:function(){},count:function(){},debug:function(){},dir:function(){},dirxml:function(){},error:function(){},exception:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},profile:function(){},profileEnd:function(){},table:function(){},time:function(){},timeEnd:function(){},timeStamp:function(){},trace:function(){},warn:function(){}}},Debug.check=function(t){var e,r,n,s;for(null==t&&(t=null),n="",e="",r=this.light;r>0;)e=String.fromCharCode(255&r)+e,r>>=8;for(n+=btoa(e),e="",r=this.dark;r>0;)e=String.fromCharCode(255&r)+e,r>>=8;return n+=btoa(e),s=n.toLowerCase(),t?s===t.toLowerCase():"s"===s.charAt(0)&&"l"===s.charAt(1)},Debug.log=function(){if(null!=Debug._log)return"function"==typeof Debug._log?Debug._log.apply(Debug,arguments):void 0;try{return console.log.apply(console,arguments)}catch(t){}},Debug.logTime=function(){var t,e,r,n,s,i;for(t=1<=arguments.length?__slice.call(arguments,0):[],s=(new Date).getTime(),this.itm||(this.itm=this.ctm=s),r=s-this.ctm,i=r.toString();i.length<6;)i=" "+i;for(e=i+"|",i=(this.ctm-this.itm).toString();i.length<6;)i=" "+i;return e+=i,e=["%c"+e+":"],n="font-weight: bold;",r>100?n+="color: red;":r>50&&(n+="color: orange;"),e.push(n),Debug.log.apply(this,[].concat(e,t)),this.ctm=s},Debug}(),window.atob||(window.atob=function(t){var e,r,n,s,i,o,a,l,h,c,u;for(l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,h=0,u="";c>h;)s=t.charAt(h),i=t.charAt(h+1),o=t.charAt(h+2),a=t.charAt(h+3),s=l.indexOf(s),i=l.indexOf(i),o=l.indexOf(o),a=l.indexOf(a),0>o&&(o=0),0>a&&(a=0),e=s<<2&255|i>>4,r=i<<4&255|o>>2,n=o<<6&255|63&a,u+=String.fromCharCode(e),u+=String.fromCharCode(r),u+=String.fromCharCode(n),h+=4;return u},window.btoa=function(t){var e,r,n,s,i,o,a,l,h,c,u;for(l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,h=0,u="";c>h;)e=255&t.charCodeAt(h+0),r=255&t.charCodeAt(h+1),n=255&t.charCodeAt(h+2),s=e>>2&63,i=63&(e<<4|r>>4),o=63&(r<<2|n>>6),a=63&n,u+=l.charAt(s)+l.charAt(i)+l.charAt(o)+l.charAt(a),h+=3;return h=c%3,c=u.length,1===h?u=u.substr(0,c-2)+"==":2===h&&(u=u.substr(0,c-1)+"="),u}),window.Debug=Debug,Debug.init();var isIE,__scopeIE8;isIE=function(){var t;return t=navigator.userAgent.toLowerCase(),-1!==t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},8===isIE()&&(__scopeIE8=document.createElement("IE8_"+Math.random())),Function.prototype.get=function(t){var e,r,n;n=__scopeIE8?__scopeIE8:this.prototype;for(r in t)e=t[r],Object.defineProperty(n,r,{get:e,configurable:!0});return null},Function.prototype.set=function(t){var e,r,n;n=__scopeIE8?__scopeIE8:this.prototype;for(e in t)r=t[e],Object.defineProperty(n,e,{set:r,configurable:!0});return null},"bind"in Function.prototype||(Function.prototype.bind=function(t){var e,r;return r=this,arguments_.length<=1?function(){return r.apply(t,arguments_)}:(e=Array.prototype.slice.call(arguments_,1),function(){return r.apply(t,0===arguments_.length?e:e.concat(Array.prototype.slice.call(arguments_)))})}),"trim"in String.prototype||(String.prototype.trim=function(t){return null==t&&(t=null),this.ltrim(t).rtrim(t)}),String.prototype.ltrim=function(t){var e;return null==t&&(t=null),t||(t="\\s"),e=new RegExp("^"+t+"*"),e.global=!0,e.multiline=!0,this.replace(e,"")},String.prototype.rtrim=function(t){var e;return null==t&&(t=null),t||(t="\\s"),e=new RegExp(t+"*$"),e.global=!0,e.multiline=!0,this.replace(e,"")},"isArray"in Array.prototype||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){var r;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),r=this.length;r>e;){if(e in this&&this[e]===t)return e;e++}return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(t,e){for(void 0===e&&(e=this.length-1),0>e&&(e+=this.length),e>this.length-1&&(e=this.length-1),e++;e-->0;)if(e in this&&this[e]===t)return e;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){var r,n,s;for(r=0,n=this.length,s=[];n>r;)r in this&&t.call(e,this[r],r,this),s.push(r++);return s}),"map"in Array.prototype||(Array.prototype.map=function(t,e){var r,n,s;for(s=new Array(this.length),r=0,n=this.length;n>r;)r in this&&(s[r]=t.call(e,this[r],r,this)),r++;return s}),"filter"in Array.prototype||(Array.prototype.filter=function(t,e){var r,n,s,i;for(s=[],i=void 0,r=0,n=this.length;n>r;)r in this&&t.call(e,i=this[r],r,this)&&s.push(i),r++;return s}),"every"in Array.prototype||(Array.prototype.every=function(t,e){var r,n;for(r=0,n=this.length;n>r;){if(r in this&&!t.call(e,this[r],r,this))return!1;r++}return!0}),"some"in Array.prototype||(Array.prototype.some=function(t,e){var r,n;for(r=0,n=this.length;n>r;){if(r in this&&t.call(e,this[r],r,this))return!0;r++}return!1}),Node.prototype.on=Node.prototype.addEventListener,Node.prototype.off=Node.prototype.removeEventListener;var EventDispatcher,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__indexOf=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};EventDispatcher=function(){function t(){this.trigger=__bind(this.trigger,this)}return t.prototype._events=null,t.prototype.on=function(t,e,r){return null==r&&(r=!1),this._events||(this._events={}),this._events[t]||(this._events[t]=[]),__indexOf.call(this._events[t],e)>=0?void 0:this._events[t].unshift(e)},t.prototype.off=function(t,e,r){var n,s;if(null==t&&(t=null),null==e&&(e=null),null==r&&(r=!1),!this._events)return void(this._events={});if(null!=t&&Boolean(this._events[t])){if(n=this._events[t],e){for(;(s=n.indexOf(e))>=0;)n.splice(s,1);return this._events[t]=n}return this._events[t].length=0}return this._events={}},t.prototype.trigger=function(t,e,r){var n,s,i,o,a,l,h,c;if(null==e&&(e=null),null==r&&(r=null),Array.isArray(t))for(l=0,h=t.length;h>l;l++)n=t[l],this.trigger(t,e);else if(this._events||(this._events={}),s=this._events[t],s&&0!==s.length){if(r||(r=this),n={type:t,target:r,currentTarget:this},"object"==typeof e)for(o in e)a=e[o],n[o]||(n[o]=a);for(i=s.length,c=[];i-->0;)c.push("function"==typeof s[i]?s[i](n,e):void 0);return c}},t.prototype.hasEvent=function(t,e){var r;if(!this._events)return void(this._events={});for(r in this._events)if(r===t&&this._events[r].indexOf(e)>-1)return!0;return!1},t}();var App,app,windowLoaded,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};App=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.WINDOW_LOAD="app_windowLoad",e.WINDOW_ACTIVE="app_windowActive",e.WINDOW_INACTIVE="app_windowInactive",e.prototype._checkWindowActivity=function(){var t,e,r,n;return this._hidden="hidden",t=this._hidden,__indexOf.call(document,t)>=0?document.addEventListener("visibilitychange",this._windowVisibilityChange):(e=this._hidden="mozHidden",__indexOf.call(document,e)>=0?document.addEventListener("mozvisibilitychange",this._windowVisibilityChange):(r=this._hidden="webkitHidden",__indexOf.call(document,r)>=0?document.addEventListener("webkitvisibilitychange",this._windowVisibilityChange):(n=this._hidden="msHidden",__indexOf.call(document,n)>=0?document.addEventListener("msvisibilitychange",this._windowVisibilityChange):__indexOf.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=this._windowVisibilityChange:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=this._windowVisibilityChange))),void 0!==document[this._hidden]?this._windowVisibilityChange({type:document[this._hidden]?"blur":"focus"}):void 0},e.prototype._windowVisibilityChange=function(t){var r,n,s,i,o;return i="visible",n="hidden",r={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0},t=t||window.event,o=t.type,s=__indexOf.call(r,o)>=0?r[t.type]:document[this._hidden],this.dispatchEvent(s?e.WINDOW_INACTIVE:e.WINDOW_ACTIVE)},e}(EventDispatcher),app||(app=new App),windowLoaded=function(){return function(){return window.remove?window.remove("load",windowLoaded):window.detachEvent?window.detachEvent("onload",windowLoaded):window.onload=null,app.trigger(App.WINDOW_LOAD)}}(this),window.addEventListener?window.addEventListener("load",windowLoaded):window.attachEvent?window.attachEvent("onload",windowLoaded):window.onload=windowLoaded;var NavigationRouter,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};NavigationRouter=function(t){function e(){this._onPathChange=__bind(this._onPathChange,this),this._routes=[],this._numRoutes=0,this._trigger=!0}return __extends(e,t),e.CHANGE="route_path_change",e.ROUTE="route_match",e.prototype.init=function(t,e){var r,n,s;if(null==t&&(t=null),null==e&&(e=!1),!t){t=window.location.href;try{r=document.getElementsByTagName("base"),r.length>0&&(r=r[0],t=r.getAttribute("href"))}catch(i){}}return this._rootPath=t.replace(/^(.*?)\/*$/,"$1/"),this.defaultTitle=document.title,this._usePushState=e?!1:null!=("undefined"!=typeof window&&null!==window&&null!=(s=window.history)?s.pushState:void 0),this._rawPath="",this._usePushState?(this._rootPath!==window.location.href&&(n=this._getPath(),this.goto(n,!1)),window.addEventListener?window.addEventListener("popstate",this._onPathChange):window.attachEvent("onpopstate",this._onPathChange)):(this._rootPath!==window.location.href&&(n=this._getPath(),window.location=this._rootPath+"#!/"+n),window.addEventListener?window.addEventListener("hashchange",this._onPathChange):window.attachEvent("onhashchange",this._onPathChange)),this},e.prototype._getPath=function(){var t,e;return e=window.location.href,t="/"===e.substr(e.length-1,e.length),t&&(e=e.substr(0,e.length-1)),0===e.indexOf(this._rootPath)&&(e=e.substr(this._rootPath.length)),e=e.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1")},e.prototype._parsePath=function(t){var e,r,n;return n=/^(?:#?!?\/*)([^?]*)\??(.*?)$/.exec(t),r=n[1],e=this._parseParams(n[2]),{rawPath:t,path:r,params:e}},e.prototype._parseParams=function(t){var e,r,n,s;if(s={},t)for(n=/&?([^=&]+)=?([^=&]*)/g,e=0;r=n.exec(t);)s[r[1]]=r[2];return s},e.prototype._onPathChange=function(){return this._currentPath=this._getPath(),this._trigger&&this._triggerPath(this._currentPath),this._trigger=!0,this._replaceData?(this.goto(this._replaceData[0],this._replaceData[1],!1),this._replaceData=null):this.trigger(e.CHANGE,this._parsePath(this._currentPath))},e.prototype._triggerPath=function(t){var r,n,s,i,o,a,l;if(n=this._parsePath(t),a=this._checkRoutes(n.path),o=a[0],i=a[1],o){for(r=o.length,l=[];r-->0;)s=o[r],"function"==typeof s.callback&&s.callback(s.route,i,t,n,s.data),l.push(this.trigger(e.ROUTE,{route:s.route,routeData:i,path:t,pathData:n,data:s.data}));return l}},e.prototype.setTitle=function(t){return document.title=t},e.prototype.getCurrentPath=function(){return this._currentPath},e.prototype.getParsedPath=function(){return this._parsePath(this._currentPath)},e.prototype.goto=function(t,e,r){return null==e&&(e=null),null==r&&(r=!0),t=t.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1"),e&&this.setTitle(e),t!==this._currentPath?(this._currentPath=t,this._trigger=r,this._usePushState?(history.pushState({},t,this._rootPath+t),this._trigger&&this._onPathChange(),this._trigger=!0):window.location.hash="!/"+t):void 0},e.prototype.replace=function(t,e,r){return null==e&&(e=null),null==r&&(r=!1),t=t.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1"),e&&this.setTitle(e),t!==this._currentPath&&(this._currentPath=t,this._usePushState?history.replaceState({},t,this._rootPath+t):(this._trigger=!1,history.back(),this._replaceData=[t,e])),r?this.triggerPath(t):void 0},e.prototype.triggerPath=function(t){return this._triggerPath(t)},e.prototype.triggerCurrentPath=function(){return this._triggerPath(this._getPath())},e.prototype.addRoute=function(t,e,r){var n,s,i,o,a,l,h;if(null==r&&(r=null),"string"!=typeof t)for(s=t.length;s-->0;)this.addRoute(t[s],e,r);for(l=/\{(.*?)\}/g,i=[],a=0;o=l.exec(t);)i[a++]=o[1];l=t,"*"===l&&(l=".*");try{l=l.replace(/(.*?)\/*$/,"$1"),h=new RegExp("(?:"+l.replace(/\{.*?\}/g,"(.+?)")+"$)","g")}catch(c){return void(n=c)}return this._routes[this._numRoutes++]={data:r,route:t,routeRE:h,labels:i,numLabels:i.length,numSlashes:t.split("/").length,callback:e},this._routes.sort(this._sortRoutes)},e.prototype.removeRoute=function(t,e){var r,n;for(r=this._numRoutes;r-->0;)n=this._routes[r],n.route===t&&(e?e===n.callback&&this._routes.splice(r,1):this._routes.splice(r,1));return this._numRoutes=this._routes.length},e.prototype.removeAllRoutes=function(){return this._routes.length=0,this._numRoutes=this._routes.length},e.prototype._checkRoutes=function(t){var e,r,n,s,i,o,a,l,h,c,u,p,d,_;for(n=this._numRoutes,t="/"+t,r=null,h=[],c=0,e=null;n-->0;){if(l=this._routes[n],r){if(l.route!==r)break;h[c++]=l}if(a=l.routeRE,a.lastIndex=0,o=a.exec(t))for(e={},h[c++]=l,r=l.route,_=l.labels,s=p=0,d=_.length;d>p;s=++p)i=_[s],u=o[s+1],e[i]=u}return[h,e]},e.prototype._sortRoutes=function(t,e){return t.numLabels<e.numLabels?-1:t.numLabels>e.numLabels?1:t.numSlashes<e.numSlashes?-1:t.numSlashes>e.numSlashes?1:t.route===e.route?0:t.route<e.route?-1:t.route>e.route?1:0},e}(EventDispatcher);var ObjectUtils;ObjectUtils=function(){function t(){}return t.count=function(t){var e,r;r=0;for(e in t)r++;return r},t.toArray=function(t){var e,r,n;r=[];for(e in t)n=t[e],r.push(t[e]);return r},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.findChild=function(t,e){return null==e&&(e=null),e?(e=e.split("."),0===e.length?t:(t=t[e[0]],e.length>0&&(t=this.findChild(t,e.splice(1).join("."))),t)):t},t}();var NumberUtils;NumberUtils=function(){function t(){}return t.isEven=function(t){return t%2===0?!0:!1},t.isZero=function(t){return Math.abs(t)<1e-5},t.toPercent=function(t,e,r){return(t-e)/(r-e)*100},t.percentToValue=function(t,e,r){return(r-e)*t+e},t.getBytesAsMegabytes=function(t){return Math.floor(t/1024/1024*100)/100+" MB"},t.bytesTo=function(t){return t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":t>=1e3?(t/1e3).toFixed(2)+" KB":t>1?t+" bytes":1===t?t+" byte":"0 byte"},t.rangeRandom=function(t,e,r){return null==r&&(r=!1),r?Math.round(Math.round(Math.random()*(e-t))+t):Math.random()*(e-t)+t},t.distanceBetweenCoordinates=function(t,e,r){var n,s,i,o,a;switch(null==r&&(r="km"),r){case"km":a=6371;break;case"meters":a=6378e3;break;case"feet":a=20925525;break;case"miles":a=3963}return i=(e.x-t.x)*Math.PI/180,o=(e.y-t.y)*Math.PI/180,n=Math.sin(i/2)*Math.sin(i/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(t.x*Math.PI/180)*Math.cos(e.x*Math.PI/180),s=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),a*s},t}();var ArrayUtils;ArrayUtils=function(){function t(){}return t.removeItem=function(t,e,r){var n,s,i,o,a;for(null==r&&(r=!1),s=r?t.slice(0):t,i=o=0,a=s.length;a>o;i=++o)n=s[i],n===e&&s.splice(i,1);return s},t.removeItemByIndex=function(t,e,r){var n;return null==r&&(r=!1),n=r?e.slice(0):e,n.splice(t,1),n},t.removeDuplicateStrings=function(t,e){return null==e&&(e=!1),t.filter(function(t,e,r){return r.indexOf(t)===e})},t.hasItem=function(t,e){return e.indexOf(t)>-1},t.merge=function(t,e){var r,n,s;for(s=[],r=0,n=0;r<t.length||n<e.length;)r<t.length&&(s.push(t[r]),r++),n<e.length&&(s.push(e[n]),n++);return s},t.randomIndex=function(t){return NumberUtils.rangeRandom(0,t.length-1,!0)},t.randomItem=function(e){return e[t.randomIndex(e)]},t.shuffle=function(t,e){var r,n,s,i,o,a,l;for(null==e&&(e=!1),i=e?t.slice(0):t,r=a=0,l=i.length;l>a;r=++a)n=i[r],s=Math.floor(Math.random()*i.length),o=i[r],i[r]=i[s],i[s]=o;return i},t.move=function(t,e,r,n){var s,i;if(null==n&&(n=!1),i=n?t.slice(0):t,r>=i.length)for(s=new_index-i.length;s--+1;)i.push(void 0);return i.splice(r,0,i.splice(e,1)[0]),i},t.fromMiddleToEnd=function(t){var e,r,n,s,i;return n=t.length,i=Math.floor(.5*n),e=t.slice(i,n),r=t.slice(0,i).reverse(),s=this.merge(e,r)},t.fromEndToMiddle=function(t){var e;return e=this.fromMiddleToEnd(t),e.reverse()},t.lastIndexOf=function(t,e){var r,n,s;for(r=0,s=t.length,n=-1;r!==s;)t[r]===e&&(n=r),r++;return n},t}();var StringUtils,__slice=[].slice;StringUtils=function(){function t(){}return t.hasString=function(t,e){return 1!==t.split(e).length?!0:!1},t.replace=function(t,e,r){return t.split(e).join(r)},t.reverse=function(t){return t?t.split("").reverse().join(""):""},t.toCamelCase=function(t){var e;return e=t.replace(/([\+\-_ ][a-z])/g,function(t){return t.toUpperCase().replace(/[\+\-_ ]/,"")}),e.charAt(0).toUpperCase()+e.slice(1)},t.removeWhiteSpace=function(t){return t?this.trim(t).replace(/\s+/g,""):""},t.removeHTMLTag=function(t){return t.replace(/<.*?>/g,"")},t.removeSpecialChars=function(t){return t.replace(/[^a-zA-Z 0-9]+/g,"")},t.convertToCPF=function(t){return t=this.removeSpecialChars(t),t=t.length>9?t.replace(/(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,"$1.$2.$3-$4"):t.length>6?t.replace(/(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,"$1.$2.$3"):t.length>3?t.replace(/(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,"$1.$2"):t.replace(/(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,"$1")},t.convertToCEP=function(t){return t=this.removeSpecialChars(t),t=t.length>5?t.replace(/(\d{0,5})(\d{0,3})/,"$1-$2"):t.replace(/(\d{0,5})(\d{0,3})/,"$1")},t.convertToDate=function(t){return t=this.removeSpecialChars(t),t=t.length>4?t.replace(/(\d{0,2})(\d{0,2})(\d{0,4})/,"$1/$2/$3"):t.length>2?t.replace(/(\d{0,2})(\d{0,2})(\d{0,4})/,"$1/$2"):t.replace(/(\d{0,2})(\d{0,2})(\d{0,4})/,"$1")},t.isEmpty=function(t){return t&&""!==t?!t.length:!0},t.toCapitalizeCase=function(t){var e;return e=this.trimLeft(t),e.replace(/(^\w)/,this._upperCase)},t.toTimeFormat=function(t,e){var r,n;return null==e&&(e=!0),r=Math.floor(t/60),n=Math.floor(t%60),String(e?this.addDecimalZero(r)+":"+this.addDecimalZero(n):r+":"+n)},t.addDecimalZero=function(t){return 10>t?"0"+t:String(t)},t.abbreviate=function(t,e,r,n){var s,i,o,a,l;if(null==e&&(e=50),null==r&&(r="..."),null==n&&(n=" "),!t)return"";if(t.length<e)return t;for(l="",o=0,a=t.split(n),i=a[o].length;e>i&&o<a.length;)l+=a[o]+n,i+=a[++o].length+n.length;if(o<a.length){for(s=["-","—",",","."," ",":","?","!","","\n"," ",String.fromCharCode(10),String.fromCharCode(13)];-1!==s.indexOf(l.charAt(l.length-1));)l=l.slice(0,-1);l=this.trim(l)+r}return 0===o&&(l=t.slice(0,e)+r),l},t.toBoolean=function(t){var e,r;if(r=["yes","true"," 1",1,!0],e=["no","false","0",0,!1],ArrayUtils.hasItem(t,r))return!0;if(ArrayUtils.hasItem(t,e))return!1;throw new Error("StringUtils::toBoolean '"+t+"' is a wrong format")},t.random=function(t){var e,r,n;for(null==t&&(t=10),r="",e=n=t;1>=t?1>=n:n>=1;e=1>=t?++n:--n)r+=String.fromCharCode(65+Math.floor(25*Math.random()));return r},t.trim=function(t,e){return null===t?"":this.trimRight(this.trimLeft(t,e),e)},t.trimRight=function(t,e){var r;return t?(r=new RegExp(e+"*$"),r.global=!0,r.multiline=!0,t.replace(r,"")):""},t.trimLeft=function(t,e){var r;return t?(r=new RegExp("^"+e+"*"),r.global=!0,r.multiline=!0,t.replace(r,"")):""},t.replaceSpecialCharacters=function(t){var e,r;this.substitionDict||this._initDict();for(e in this.substitionDict)console.log(e),r=new RegExp(e,"g"),t=t.replace(r,this.substitionDict[e]);return t},t._upperCase=function(){var t,e;return e=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],e.toUpperCase()},t.substitionDict=null,t._initDict=function(){var t,e;this.substitionDict=[],this.substitionDict["ã"]="a",this.substitionDict["á"]="a",this.substitionDict["â"]="a",this.substitionDict["ä"]="a",this.substitionDict["à"]="a",this.substitionDict["é"]="e",this.substitionDict["ê"]="e",this.substitionDict["ë"]="e",this.substitionDict["è"]="e",this.substitionDict["í"]="i",this.substitionDict["î"]="i",this.substitionDict["ï"]="i",this.substitionDict["ì"]="i",this.substitionDict["õ"]="o",this.substitionDict["ó"]="o",this.substitionDict["ô"]="o",this.substitionDict["ö"]="o",this.substitionDict["ò"]="o",this.substitionDict["ú"]="u",this.substitionDict["û"]="u",this.substitionDict["ü"]="u",this.substitionDict["ù"]="u",this.substitionDict["ç"]="c",this.substitionDict["ñ"]="n",e=[];for(t in this.substitionDict)e.push(this.substitionDict[t.toUpperCase()]=String(this.substitionDict[t]).toUpperCase());return e},t}();var JSONUtils;JSONUtils=function(){function t(){}return t.parseJSON=function(e){var r;return r=!1,"string"==typeof e&&(r=!0,e=t.replaceMultiline(e)),e=t.removeComments(e),r&&(e=JSON.parse(e)),e},t.replaceMultiline=function(t){return"string"!=typeof t?t:(t=t.replace(/^(\s*.*?""")(?:[\s\t]*\n)?([\t\s]*)(\S[\s\S]*)\n?[\s]*(""")/gim,this._replaceMultilinePart),t=t.replace(/^(\s*.*?)"""([\s\S]*?)"""/gim,this._replaceEmptyMultiline))},t._replaceMultilinePart=function(t,e,r,n,s){var i;return i=new RegExp(r+"?([^\n]*)","g"),n=n.replace(i,"$1"),e+n+s},t._replaceEmptyMultiline=function(t,e,r){return r=r.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"),e+'"'+r+'"'},t.removeComments=function(t){var e;return e=!0,"string"!=typeof t&&(e=!1,t=JSON.stringify(t)),t=t.replace(/(^|\s)(\/\/.*$)|(\/\*(.|\s)*?\*\/?)/gim,""),e?t:JSON.parse(t)},t.filterObject=function(t,e,r,n,s){var i,o,a,l;null==r&&(r=null),null==n&&(n=null),null==s&&(s=!1),a=[],e=[].concat(e),n&&(n=[].concat(n));for(o in t)l=t[o],n&&n.indexOf(o)>=0||(e.indexOf(o)>=0&&(i=!0,r&&typeof l!==r&&(i=!1),i&&(s?a.indexOf(t)<0&&a.push(t):a.push(l))),("array"==typeof l||"object"==typeof l)&&(a=[].concat(a,this.filterObject(l,e,r,n,s))));return a},t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var r=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(r)||r.__proto__;if(n){r[(e+="_")+"constructor"]=n.constructor;for(var s in n)r.hasOwnProperty(s)&&"function"==typeof n[s]&&(r[e+s]=n[s])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var r=0,n=t.length;n>r;r++)if(e===t[r])return r;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var r=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(r))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.Event_constructor("error"),this.title=t,this.message=e,this.data=r}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,r){var n;n=r?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var s=n[t];return s&&this.removeEventListener(t,e,r),s=n[t],s?s.push(e):n[t]=[e],e},e.on=function(t,e,r,n,s,i){return e.handleEvent&&(r=r||e,e=e.handleEvent),r=r||this,this.addEventListener(t,function(t){e.call(r,t,s),n&&t.remove()},i)},e.removeEventListener=function(t,e,r){var n=r?this._captureListeners:this._listeners;if(n){var s=n[t];if(s)for(var i=0,o=s.length;o>i;i++)if(s[i]==e){1==o?delete n[t]:s.splice(i,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(r){}if(t.bubbles&&this.parent){for(var n=this,s=[n];n.parent;)s.push(n=n.parent);var i,o=s.length;for(i=o-1;i>=0&&!t.propagationStopped;i--)s[i]._dispatchEvent(t,1+(0==i));for(i=1;o>i&&!t.propagationStopped;i++)s[i]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,r=this._captureListeners;return!!(e&&e[t]||r&&r[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var r,n=1==e?this._captureListeners:this._listeners;if(t&&n){var s=n[t.type];if(!s||!(r=s.length))return;try{t.currentTarget=this}catch(i){}try{t.eventPhase=e}catch(i){}t.removed=!1,s=s.slice();for(var o=0;r>o&&!t.immediatePropagationStopped;o++){var a=s[o];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){function t(e,n){function i(t){if(i[t]!==g)return i[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=i("json-stringify")&&i("json-parse");else{var r,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var l=n.stringify,c="function"==typeof l&&y;if(c){(r=function(){return 1}).toJSON=r;try{c="0"===l(0)&&"0"===l(new o)&&'""'==l(new a)&&l(v)===g&&l(g)===g&&l()===g&&"1"===l(r)&&"[1]"==l([r])&&"[null]"==l([g])&&"null"==l(null)&&"[null,null,null]"==l([g,v,null])&&l({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,r)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new h(-1))}catch(u){c=!1}}e=c}if("json-parse"==t){var p=n.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){r=p(s);var d=5==r.a.length&&1===r.a[0];if(d){try{d=!p('"	"')}catch(u){}if(d)try{d=1!==p("01")}catch(u){}if(d)try{d=1!==p("1.")}catch(u){}}}}catch(u){d=!1}e=d}}return i[t]=!!e}e||(e=s.Object()),n||(n=s.Object());var o=e.Number||s.Number,a=e.String||s.String,l=e.Object||s.Object,h=e.Date||s.Date,c=e.SyntaxError||s.SyntaxError,u=e.TypeError||s.TypeError,p=e.Math||s.Math,d=e.JSON||s.JSON;"object"==typeof d&&d&&(n.stringify=d.stringify,n.parse=d.parse);var _,f,g,m=l.prototype,v=m.toString,y=new h(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(b){}if(!i("json")){var E="[object Function]",w="[object Date]",C="[object Number]",L="[object String]",T="[object Array]",P="[object Boolean]",A=i("bug-string-char-index");if(!y)var S=p.floor,R=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(t,e){return R[e]+365*(t-1970)+S((t-1969+(e=+(e>1)))/4)-S((t-1901+e)/100)+S((t-1601+e)/400)};if((_=m.hasOwnProperty)||(_=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?_=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,_=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,_.call(this,t)}),f=function(t,e){var n,s,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n;for(i in s)_.call(s,i)&&o++;return n=s=null,o?f=2==o?function(t,e){var r,n={},s=v.call(t)==E;for(r in t)s&&"prototype"==r||_.call(n,r)||!(n[r]=1)||!_.call(t,r)||e(r)}:function(t,e){var r,n,s=v.call(t)==E;for(r in t)s&&"prototype"==r||!_.call(t,r)||(n="constructor"===r)||e(r);(n||_.call(t,r="constructor"))&&e(r)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(t,e){var n,i,o=v.call(t)==E,a=!o&&"function"!=typeof t.constructor&&r[typeof t.hasOwnProperty]&&t.hasOwnProperty||_;for(n in t)o&&"prototype"==n||!a.call(t,n)||e(n);for(i=s.length;n=s[--i];a.call(t,n)&&e(n));}),f(t,e)},!i("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O="000000",I=function(t,e){return(O+(e||0)).slice(-t)},N="\\u00",D=function(t){for(var e='"',r=0,n=t.length,s=!A||n>10,i=s&&(A?t.split(""):t);n>r;r++){var o=t.charCodeAt(r);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=x[o];break;default:if(32>o){e+=N+I(2,o.toString(16));break}e+=s?i[r]:t.charAt(r)}}return e+'"'},M=function(t,e,r,n,s,i,o){var a,l,h,c,p,d,m,y,b,E,A,R,x,O,N,k;try{a=e[t]}catch(B){}if("object"==typeof a&&a)if(l=v.call(a),l!=w||_.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=C&&l!=L&&l!=T||_.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(j){for(p=S(a/864e5),h=S(p/365.2425)+1970-1;j(h+1,0)<=p;h++);for(c=S((p-j(h,0))/30.42);j(h,c+1)<=p;c++);p=1+p-j(h,c),d=(a%864e5+864e5)%864e5,m=S(d/36e5)%24,y=S(d/6e4)%60,b=S(d/1e3)%60,E=d%1e3}else h=a.getUTCFullYear(),c=a.getUTCMonth(),p=a.getUTCDate(),m=a.getUTCHours(),y=a.getUTCMinutes(),b=a.getUTCSeconds(),E=a.getUTCMilliseconds();
a=(0>=h||h>=1e4?(0>h?"-":"+")+I(6,0>h?-h:h):I(4,h))+"-"+I(2,c+1)+"-"+I(2,p)+"T"+I(2,m)+":"+I(2,y)+":"+I(2,b)+"."+I(3,E)+"Z"}else a=null;if(r&&(a=r.call(e,t,a)),null===a)return"null";if(l=v.call(a),l==P)return""+a;if(l==C)return a>-1/0&&1/0>a?""+a:"null";if(l==L)return D(""+a);if("object"==typeof a){for(O=o.length;O--;)if(o[O]===a)throw u();if(o.push(a),A=[],N=i,i+=s,l==T){for(x=0,O=a.length;O>x;x++)R=M(x,a,r,n,s,i,o),A.push(R===g?"null":R);k=A.length?s?"[\n"+i+A.join(",\n"+i)+"\n"+N+"]":"["+A.join(",")+"]":"[]"}else f(n||a,function(t){var e=M(t,a,r,n,s,i,o);e!==g&&A.push(D(t)+":"+(s?" ":"")+e)}),k=A.length?s?"{\n"+i+A.join(",\n"+i)+"\n"+N+"}":"{"+A.join(",")+"}":"{}";return o.pop(),k}};n.stringify=function(t,e,n){var s,i,o,a;if(r[typeof e]&&e)if((a=v.call(e))==E)i=e;else if(a==T){o={};for(var l,h=0,c=e.length;c>h;l=e[h++],a=v.call(l),(a==L||a==C)&&(o[l]=1));}if(n)if((a=v.call(n))==C){if((n-=n%1)>0)for(s="",n>10&&(n=10);s.length<n;s+=" ");}else a==L&&(s=n.length<=10?n:n.slice(0,10));return M("",(l={},l[""]=t,l),i,o,s,"",[])}}if(!i("json-parse")){var k,B,q=a.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw k=B=null,c()},X=function(){for(var t,e,r,n,s,i=B,o=i.length;o>k;)switch(s=i.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=A?i.charAt(k):i[k],k++,t;case 34:for(t="@",k++;o>k;)if(s=i.charCodeAt(k),32>s)U();else if(92==s)switch(s=i.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=H[s],k++;break;case 117:for(e=++k,r=k+4;r>k;k++)s=i.charCodeAt(k),s>=48&&57>=s||s>=97&&102>=s||s>=65&&70>=s||U();t+=q("0x"+i.slice(e,k));break;default:U()}else{if(34==s)break;for(s=i.charCodeAt(k),e=k;s>=32&&92!=s&&34!=s;)s=i.charCodeAt(++k);t+=i.slice(e,k)}if(34==i.charCodeAt(k))return k++,t;U();default:if(e=k,45==s&&(n=!0,s=i.charCodeAt(++k)),s>=48&&57>=s){for(48==s&&(s=i.charCodeAt(k+1),s>=48&&57>=s)&&U(),n=!1;o>k&&(s=i.charCodeAt(k),s>=48&&57>=s);k++);if(46==i.charCodeAt(k)){for(r=++k;o>r&&(s=i.charCodeAt(r),s>=48&&57>=s);r++);r==k&&U(),k=r}if(s=i.charCodeAt(k),101==s||69==s){for(s=i.charCodeAt(++k),(43==s||45==s)&&k++,r=k;o>r&&(s=i.charCodeAt(r),s>=48&&57>=s);r++);r==k&&U(),k=r}return+i.slice(e,k)}if(n&&U(),"true"==i.slice(k,k+4))return k+=4,!0;if("false"==i.slice(k,k+5))return k+=5,!1;if("null"==i.slice(k,k+4))return k+=4,null;U()}return"$"},F=function(t){var e,r;if("$"==t&&U(),"string"==typeof t){if("@"==(A?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=X(),"]"!=t;r||(r=!0))r&&(","==t?(t=X(),"]"==t&&U()):U()),","==t&&U(),e.push(F(t));return e}if("{"==t){for(e={};t=X(),"}"!=t;r||(r=!0))r&&(","==t?(t=X(),"}"==t&&U()):U()),(","==t||"string"!=typeof t||"@"!=(A?t.charAt(0):t[0])||":"!=X())&&U(),e[t.slice(1)]=F(X());return e}U()}return t},V=function(t,e,r){var n=J(t,e,r);n===g?delete t[e]:t[e]=n},J=function(t,e,r){var n,s=t[e];if("object"==typeof s&&s)if(v.call(s)==T)for(n=s.length;n--;)V(s,n,r);else f(s,function(t){V(s,t,r)});return r.call(t,e,s)};n.parse=function(t,e){var r,n;return k=0,B=""+t,r=F(X()),"$"!=X()&&U(),k=B=null,e&&v.call(e)==E?J((n={},n[""]=r,n),"",e):r}}}return n.runInContext=t,n}var e="function"==typeof define&&define.amd,r={"function":!0,object:!0},n=r[typeof exports]&&exports&&!exports.nodeType&&exports,s=r[typeof window]&&window||this,i=n&&r[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!i||i.global!==i&&i.window!==i&&i.self!==i||(s=i),n&&!e)t(s,n);else{var o=s.JSON,a=s.JSON3,l=!1,h=t(s,s.JSON3={noConflict:function(){return l||(l=!0,s.JSON=o,s.JSON3=a,o=a=null),h}});s.JSON={parse:h.parse,stringify:h.stringify}}e&&define(function(){return h})}.call(this),function(){var t={};t.parseXML=function(t,e){var r=null;try{if(window.DOMParser){var n=new DOMParser;r=n.parseFromString(t,e)}else r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(t)}catch(s){}return r},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(e){throw e}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=8e3}var e=t.prototype={},r=t;r.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof r)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=r}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[./]*?\//i,t.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,t.parseURI=function(e){var r={absolute:!1,relative:!1};if(null==e)return r;var n=e.indexOf("?");n>-1&&(e=e.substr(0,n));var s;return t.ABSOLUTE_PATT.test(e)?r.absolute=!0:t.RELATIVE_PATT.test(e)&&(r.relative=!0),(s=e.match(t.EXTENSION_PATT))&&(r.extension=s[1].toLowerCase()),r},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var r=[];for(var n in t)r.push(n+"="+escape(t[n]));return e&&(r=r.concat(e)),r.join("&")},t.buildPath=function(t,e){if(null==e)return t;var r=[],n=t.indexOf("?");if(-1!=n){var s=t.slice(n+1);r=r.concat(s.split("&"))}return-1!=n?t.slice(0,n)+"?"+this._formatQueryString(e,r):t+"?"+this._formatQueryString(e,r)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var r=document.createElement("a");r.href=location.href;var n=""!=e.hostname&&(e.port!=r.port||e.protocol!=r.protocol||e.hostname!=r.hostname);return n},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=r,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),r=t;r.POST="POST",r.GET="GET",r.BINARY="binary",r.CSS="css",r.IMAGE="image",r.JAVASCRIPT="javascript",r.JSON="json",r.JSONP="jsonp",r.MANIFEST="manifest",r.SOUND="sound",r.VIDEO="video",r.SPRITESHEET="spritesheet",r.SVG="svg",r.TEXT="text",r.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),r=this;e instanceof Function?e(function(t){r._result=t,r._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.AbstractLoader_constructor(t,e,r),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=r,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=r,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),r={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var i=0,o=s.ACTIVEX_VERSIONS.length;o>i;i++){s.ACTIVEX_VERSIONS[i];try{n=new ActiveXObject(axVersions);break}catch(a){}}if(null==n)return!1}t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(r.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(r["Content-Type"]="application/x-www-form-urlencoded"),e||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var h in t.headers)r[h]=t.headers[h];for(h in r)n.setRequestHeader(h,r[h]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r){this.AbstractLoader_constructor(),this.init(t,e,r)}var e=createjs.extend(t,createjs.AbstractLoader),r=t;e.init=function(t,e,r){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this.stopOnError=!1,this.maintainScriptOrder=!0,this.next=null,this._paused=!1,this._basePath=e,this._crossOrigin=r,this._typeCallbacks={},this._extensionCallbacks={},this._loadStartWasDispatched=!1,this._maxConnections=1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length},r.loadTimeout=8e3,r.LOAD_TIMEOUT=0,r.BINARY=createjs.AbstractLoader.BINARY,r.CSS=createjs.AbstractLoader.CSS,r.IMAGE=createjs.AbstractLoader.IMAGE,r.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,r.JSON=createjs.AbstractLoader.JSON,r.JSONP=createjs.AbstractLoader.JSONP,r.MANIFEST=createjs.AbstractLoader.MANIFEST,r.SOUND=createjs.AbstractLoader.SOUND,r.VIDEO=createjs.AbstractLoader.VIDEO,r.SVG=createjs.AbstractLoader.SVG,r.TEXT=createjs.AbstractLoader.TEXT,r.XML=createjs.AbstractLoader.XML,r.POST=createjs.AbstractLoader.POST,r.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var r=!1;if(e){for(;e.length;){var n=e.pop(),s=this.getResult(n);for(i=this._loadQueue.length-1;i>=0;i--)if(o=this._loadQueue[i].getItem(),o.id==n||o.src==n){this._loadQueue.splice(i,1)[0].cancel();break}for(i=this._loadQueueBackup.length-1;i>=0;i--)if(o=this._loadQueueBackup[i].getItem(),o.id==n||o.src==n){this._loadQueueBackup.splice(i,1)[0].cancel();break}if(s)delete this._loadItemsById[s.id],delete this._loadItemsBySrc[s.src],this._disposeItem(s);else for(var i=this._currentLoads.length-1;i>=0;i--){var o=this._currentLoads[i].getItem();if(o.id==n||o.src==n){this._currentLoads.splice(i,1)[0].cancel(),r=!0;break}}}r&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],r=0,n=this._loadQueueBackup.length;n>r;r++)e.push(this._loadQueueBackup[r].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var r=0,n=e.types.length;n>r;r++)this._typeCallbacks[e.types[r]]=e;if(null!=e.extensions)for(r=0,n=e.extensions.length;n>r;r++)this._extensionCallbacks[e.extensions[r]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,r){if(null==t){var n=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(n)}this._addItem(t,null,r),this.setPaused(e!==!1?!1:!0)},e.loadManifest=function(t,e,n){var s=null,i=null;if(t instanceof Array){if(0==t.length){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(o)}s=t}else if("string"==typeof t)s=[{src:t,type:r.MANIFEST}];else{if("object"!=typeof t){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(o)}if(void 0!==t.src){if(null==t.type)t.type=r.MANIFEST;else if(t.type!=r.MANIFEST){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(o)}s=[t]}else void 0!==t.manifest&&(s=t.manifest,i=t.path)}for(var a=0,l=s.length;l>a;a++)this._addItem(s[a],i,n);this.setPaused(e!==!1?!1:!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var r=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==r)return null;var n=r.id;return e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n]},e.getItems=function(t){for(var e=[],r=0,n=this._loadQueueBackup.length;n>r;r++){var s=this._loadQueueBackup[r],i=s.getItem();(t!==!0||s.loaded)&&e.push({item:i,result:this.getResult(i.id),rawResult:this.getResult(i.id,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},e._addItem=function(t,e,r){var n=this._createLoadItem(t,e,r);if(null!=n){var s=this._createLoader(n);null!=s&&(n._loader=s,this._loadQueue.push(s),this._loadQueueBackup.push(s),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||n.maintainOrder===!0)&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,n){var s=createjs.LoadItem.create(t);if(null==s)return null;var i=createjs.RequestUtils.parseURI(s.src);i.extension&&(s.ext=i.extension),null==s.type&&(s.type=createjs.RequestUtils.getTypeByExtension(s.ext));var o="",a=n||this._basePath,l=s.src;if(!i.absolute&&!i.relative)if(e){o=e;var h=createjs.RequestUtils.parseURI(e);l=e+l,null==a||h.absolute||h.relative||(o=a+o)}else null!=a&&(o=a);s.src=o+s.src,s.path=o,(void 0===s.id||null===s.id||""===s.id)&&(s.id=l);var c=this._typeCallbacks[s.type]||this._extensionCallbacks[s.ext];if(c){var u=c.callback.call(c.scope,s,this);if(u===!1)return null;u===!0||null!=u&&(s._loader=u),i=createjs.RequestUtils.parseURI(s.src),null!=i.extension&&(s.ext=i.extension)}return this._loadItemsById[s.id]=s,this._loadItemsBySrc[s.src]=s,null==s.loadTimeout&&(s.loadTimeout=r.loadTimeout),null==s.crossOrigin&&(s.crossOrigin=this._crossOrigin),s},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,r=0;r<this._availableLoaders.length;r++){var n=this._availableLoaders[r];if(n&&n.canLoadItem(t))return new n(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var r=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(r),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,r=e.getItem(),n=e.getResult();this._loadedResults[r.id]=n;var s=e.getResult(!0);null!=s&&s!==n&&(this._loadedRawResults[r.id]=s),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(r,e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var r=0;r<e.length;r++){var n=e[r].item;this._loadItemsBySrc[n.src]=n,this._loadItemsById[n.id]=n,this._loadedResults[n.id]=e[r].result,this._loadedRawResults[n.id]=e[r].rawResult}},e._finishOrderedItem=function(t,e){var r=t.getItem();if(this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT||r.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var n=createjs.indexOf(this._scriptOrder,r);return-1==n?!1:(this._loadedScripts[n]=e===!0?!0:r,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var r=this._loadedScripts[e];if(null===r)break;if(r!==!0){var n=this._loadedResults[r.id];r.type==createjs.LoadQueue.JAVASCRIPT&&(document.body||document.getElementsByTagName("body")[0]).appendChild(n);var s=r._loader;this._processFinishedLoad(r,s),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var r=this._scriptOrder.indexOf(e),n=0;r>n;){var s=this._loadedScripts[n];if(null==s)return!1;n++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){var e=t.getItem();delete e._loader;for(var r=this._currentLoads.length,n=0;r>n;n++)if(this._currentLoads[n]==t){this._currentLoads.splice(n,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var r=0,n=0,s=this._currentLoads.length;s>n;n++)r+=this._currentLoads[n].progress;t+=r/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var r=new createjs.Event("fileprogress");r.progress=e,r.loaded=e,r.total=1,r.item=t,this.dispatchEvent(r)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var r=new createjs.Event("fileload");r.loader=e,r.item=t,r.result=this._loadedResults[t.id],r.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(r),this.hasEventListener("fileload")&&this.dispatchEvent(r)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}var e=(createjs.extend(t,createjs.AbstractLoader),t);e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(e?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"
}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag(),r=document.getElementsByTagName("head")[0];if(r.appendChild(e),e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var n=document.createTextNode(t.getResult(!0));e.appendChild(n)}}else e=this._tag;return e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(r){var n=e._tag,s=window.URL||window.webkitURL;if(e._preferXHR)if(s){var i=s.createObjectURL(t.getResult(!0));n.src=i,n.onload=function(){s.revokeObjectURL(e.src)}}else n.src=t.getItem().src;n.complete?r(n):n.onload=function(){r(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON&&!t._loadAsJSONP},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(r){var n=new createjs.ErrorEvent("JSON_FORMAT",null,r);return this._sendError(n),r}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP||t._loadAsJSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback]},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.MANIFEST_PROGRESS=.25,r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(r.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=r.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-r.MANIFEST_PROGRESS)+r.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),r=t;e._createTag=function(){return document.createElement("video")},r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.SPRITESHEET_PROGRESS=.25,r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t&&t instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(r.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=r.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var r=this.getResult().images,n=r.indexOf(t.item.src);r[n]=e}},e._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-r.SPRITESHEET_PROGRESS)+r.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml"),this.getTag().style.visibility="hidden"}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),r=t.getTag();return!this._preferXHR&&document.body.contains(r)&&document.body.removeChild(r),null!=e.documentElement?(r.appendChild(e.documentElement),r.style.visibility="visible",r):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),r=t;r.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}();var AssetLoader,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};AssetLoader=function(t){function e(){this._fileLoad=__bind(this._fileLoad,this),this._onError=__bind(this._onError,this),this._groups={}}return __extends(e,t),e.getInstance=function(){return null!=e._instance?e._instance:e._instance=function(t,e,r){r.prototype=t.prototype;var n=new r,s=t.apply(n,e);return Object(s)===s?s:n}(e,arguments,function(){})},e.prototype._groups=null,e.prototype.loadGroup=function(t,e){var r;return r=this.getGroup(t),r.loadManifest(e),r},e.prototype.getGroup=function(t,e,r){var n;return null==e&&(e=3),null==r&&(r=!0),n=this._groups[t],n||(n=new createjs.LoadQueue(r),n.id=t,this._groups[t]=n,n.on("fileload",this._fileLoad),n.on("error",this._onError),n.on("fileerror",this._onError)),n.setMaxConnections(e),n},e.prototype.preferXHR=function(t,e){var r;return null==e&&(e=!0),r=this.getGroup(t).setPreferXHR=e},e.prototype._onError=function(t){switch(t.currentTarget.off("error",this._onError),t.currentTarget.off("fileerror",this._onError),t.type){case"fileerror":break;case"error":}return console.log(t.title,t.data)},e.prototype._fileLoad=function(t){return t.target.off("fileload",this._fileLoad),t.item.tag=t.result},e.prototype.getItem=function(t,e){var r,n,s,i,o;if(null==e&&(e=null),e)return null!=(i=this._groups[e])?i.getItem(t):void 0;o=this._groups;for(n in o)if(s=o[n],r=s.getItem(t))return r},e.prototype.getResult=function(t,e){var r,n,s,i,o;if(null==e&&(e=null),e)return null!=(i=this._groups[e])?i.getResult(t):void 0;o=this._groups;for(n in o)if(s=o[n],r=s.getResult(t))return r},e.addFiles=function(t,e){var r,n,s,i,o,a;for(n=/.*\.(js|css|svg)$/g,s=/.*\.(mp4)$/g,o=0,a=t.length;a>o;o++)r=t[o],i={id:"",src:""},n.lastIndex=0,i.id=r.id||"item",i.src=r.src,s.test(i.src)&&(i.type="video"),r.src&&n.test(r.src)&&(i.type="text"),i.src&&e.loadFile(i,!1);return t.length>0?e.load():void 0},e}(EventDispatcher);var BaseDOM,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},__slice=[].slice;Node.prototype.__appendChild__=Node.prototype.appendChild,Node.prototype.appendChild=function(t){var e;return e=t,t instanceof BaseDOM&&(e=t.element,t.parent=this),Node.prototype.__appendChild__.call(this,e)},Node.prototype.__removeChild__=Node.prototype.removeChild,Node.prototype.removeChild=function(t){var e;return e=t,t instanceof BaseDOM&&(e=t.element,t.parent=this),Node.prototype.__removeChild__.call(this,e)},Node.prototype.getInstance=function(){return this.__instance__},Node.prototype.matches=Node.prototype.matches||Node.prototype.webkitMatchesSelector||Node.prototype.mozMatchesSelector||Node.prototype.msMatchesSelector||Node.prototype.oMatchesSelector,Node.prototype.findParents=function(t){var e;return null!=this.parentNode?("function"==typeof(e=this.parentNode).matches?e.matches(t):void 0)?this.parentNode:this.parentNode.findParents(t):null},BaseDOM=function(t){function e(){var t,e,r,n,s,i;for(i=1<=arguments.length?__slice.call(arguments,0):[],e="div",t=null,n=null,r=i.length;r--;)s=i[r],null!=s.element&&(e=s.element),null!=s.className&&(t=s.className),null!=s.namespace&&(n=s.namespace);"string"==typeof e?n?(this._namespace=n,this._element=document.createElementNS(this._namespace,e)):this._element=document.createElement(e):e instanceof HTMLElement&&(this._element=e),t&&this.addClass(t),this._element.__instance__=this}return __extends(e,t),e.get({element:function(){return this._element}}),e.get({namespace:function(){return this._namespace}}),e.get({childNodes:function(){return this.element.childNodes}}),e.get({width:function(){return this.getBounds().width}}),e.get({height:function(){return this.getBounds().height}}),e.get({left:function(){return this.getBounds().left}}),e.get({top:function(){return this.getBounds().top}}),e.get({x:function(){return this.getBounds().left}}),e.get({y:function(){return this.getBounds().top}}),e.get({parent:function(){return this._parent}}),e.set({parent:function(t){if(!(t instanceof e||t instanceof Node))throw new Error("Parent instance is not either Node or BaseDOM");return this._parent=t}}),e.get({className:function(){return this.element.className}}),e.set({className:function(t){return this.element.className=t.trim()}}),e.get({text:function(){return this.html}}),e.set({text:function(t){return this.html=t}}),e.get({html:function(){return this.element.innerHTML}}),e.set({html:function(t){return this.element.innerHTML=t}}),e.get({isAttached:function(){return document.contains(this.element)||document.body.contains(this.element)}}),e.prototype.appendChild=function(t){var r;return r=t,t instanceof e&&(r=t.element),this.appendChildAt(r)},e.prototype.appendChildAt=function(t,r){var n;return null==r&&(r=-1),n=t,t instanceof e&&(n=t.element),-1===r||r>=this.childNodes.length?this.element.appendChild(n):this.element.insertBefore(n,this.childNodes[r]),t instanceof e&&(t.parent=this),t},e.prototype.removeChild=function(t){var r;r=t,t instanceof e&&(r=t.element);try{return this.element.removeChild(r)}catch(n){}},e.prototype.removeChildAt=function(t){return null==t&&(t=-1),t<this.childNodes.length?this.removeChild(this.childNodes[i]):void 0},e.prototype.removeAll=function(){var t,e,r;for(t=this.childNodes,e=t.length,r=[];e-->0;)r.push(this.removeChild(t[e]));return r},e.prototype.matches=function(t){return this.element.matches(t)},e.prototype.findParents=function(t){return this.element.findParents(t)},e.prototype.find=function(t,e){var r;return null==e&&(e=!1),r=this.element.querySelector(t),e?null!=r?r.getInstance():void 0:r},e.prototype.findAll=function(t,e){var r,n,s,i,o;if(null==e&&(e=!1),r=this.element.querySelectorAll(t),e){for(n=[],s=-1,i=r.length,o=0;++s<i;)r[s].getInstance()&&(n[o++]=r[s].getInstance());r=n}return r},e.prototype.attr=function(t,e,r){var n,s,i;if(null==e&&(e="nonenonenone"),null==r&&(r=!1),"string"==typeof t)return this._attr(t,e,r);if("object"==typeof t){i=[];for(n in t)s=t[n],i.push(this._attr(n,s,r));return i}},e.prototype._attr=function(t,e,r){return null==e&&(e="nonenonenone"),null==r&&(r=!1),r===!1&&(r=this.namespace),"nonenonenone"!==e&&(r?this.element.setAttributeNS(r,t,e):this.element.setAttribute(t,e)),r?this.element.getAttributeNS(r,t):this.element.getAttribute(t)},e.prototype._css=function(t,e){return null==e&&(e=null),null!==e&&(this.element.style[t]=e),this.element.style[t]},e.prototype.css=function(t,e){var r,n,s;if(null==e&&(e=null),"string"==typeof t)return this._css(t,e);if("object"==typeof t){s=[];for(r in t)n=t[r],s.push(this._css(r,n));return s}},e.prototype.addClass=function(t){var e,r,n;if("string"==typeof t)t=t.replace(/\s+/gi," ").split(" ");else if("Array"!=typeof t)return;for(e=this.className.replace(/\s+/gi," ").split(" "),n=e.length,r=t.length;r-->0;)e.indexOf(t[r])>=0||(e[n++]=t[r]);return this.className=e.join(" ")},e.prototype.removeClass=function(t){var e,r,n;if("string"==typeof t)t=t.replace(/\s+/gi," ").split(" ");else if("Array"!=typeof t)return;for(e=this.className.replace(/\s+/gi," ").split(" "),r=t.length;r-->0;)(n=e.indexOf(t[r]))>=0&&e.splice(n,1);return this.className=e.join(" ")},e.prototype.toggleClass=function(t,e){var r,n;if(null==e&&(e=null),null!==e)return void(e?this.addClass(t):this.removeClass(t));if("string"==typeof t)t=t.replace(/\s+/gi," ").split(" ");else if("Array"!=typeof t)return;for(r=t.length,n=[];r-->0;)n.push(this.hasClass(t[r])?this.removeClass(t[r]):this.addClass(t[r]));return n},e.prototype.hasClass=function(t){var e,r,n;if("string"==typeof t)t=t.replace(/\s+/gi," ").split(" ");else if("Array"!=typeof t)return;for(e=this.className.replace(/\s+/gi," ").split(" "),n=t.length,r=!0;n-->0;)r&=e.indexOf(t[n])>=0;return r},e.prototype.getBounds=function(t){var r,n,s,i,o;null==t&&(t=null),n={},r=this.element.getBoundingClientRect();for(s in r)o=r[s],n[s]=o;return t&&(t instanceof e?i=t.getBounds():t instanceof HTMLElement&&(i=t.getBoundingClientRect())),i&&(n.top-=i.top,n.left-=i.left,n.bottom-=i.top,n.right-=i.left),n.width=n.right-n.left,n.height=n.bottom-n.top,n},e.prototype.destroy=function(){var t;return"function"==typeof this.off&&this.off(),null!=(t=this._element)&&"function"==typeof t.remove?t.remove():void 0},e}(EventDispatcher);var BaseView,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};BaseView=function(t){function e(t,r){null==t&&(t=null),null==r&&(r=null),this.destroyComplete=__bind(this.destroyComplete,this),this.destroy=__bind(this.destroy,this),this.hideComplete=__bind(this.hideComplete,this),this.hide=__bind(this.hide,this),this.hideStart=__bind(this.hideStart,this),this.showComplete=__bind(this.showComplete,this),this.show=__bind(this.show,this),this.showStart=__bind(this.showStart,this),this.createComplete=__bind(this.createComplete,this),this.create=__bind(this.create,this),this.createStart=__bind(this.createStart,this),this.getReverseParentList=__bind(this.getReverseParentList,this),this._created=!1,this._data=t?t:{},this._id=null!=this._data.id?this._data.id:void 0,this._content=null!=this._data.content?this._data.content:void 0,this._route=null!=this._data.route?this._data.route:void 0,this._parent=null!=this._data.parent?this._data.parent:void 0,this._subviews=null!=this._data.subviews?this._data.subviews:void 0,this._destroyable=null!=this._data.destroyable?this._data.destroyable:void 0,e.__super__.constructor.call(this,{element:"div",className:r+"-view"})}return __extends(e,t),e.CREATE_START="create_start",e.CREATE="create",e.CREATE_COMPLETE="create_complete",e.SHOW_START="show_start",e.SHOW="show",e.SHOW_COMPLETE="show_complete",e.HIDE_START="hide_start",e.HIDE="hide",e.HIDE_COMPLETE="hide_complete",e.DESTROY="destroy",e.DESTROY_COMPLETE="destroy_complete",e.get({data:function(){return this._data}}),e.set({data:function(t){return this._data=ObjectUtils.clone(t)}}),e.get({id:function(){return this._id}}),e.set({id:function(t){return this._id=t}}),e.get({content:function(){return this._content}}),e.set({content:function(t){return this._content=t}}),e.get({route:function(){return this._route}}),e.set({route:function(t){return this._route=t}}),e.get({parent:function(){return this._parent}}),e.set({parent:function(t){return this._parent=t}}),e.get({loader:function(){var t;return null!=this._id&&"undefined"!=typeof app&&null!==app&&null!=(t=app.loader)?t.getGroup(this.id):void 0}}),e.get({created:function(){return this._created}}),e.get({subviews:function(){return this._subviews}}),e.set({subviews:function(t){return this._subviews=t}}),e.get({destroyable:function(){return this._destroyable}}),e.set({destroyable:function(t){return this._destroyable=t}}),e.get({type:function(){return this._type}}),e.set({type:function(t){return this._type=t}}),e.get({meta:function(){var t;return null!=(null!=(t=this.content)?t.meta:void 0)?this.content.meta:void 0}}),e.set({meta:function(t){return this._meta=t}}),e.get({progress:function(){return this._progress}}),e.set({progress:function(t){return this._progress=t}}),e.get({openedSubview:function(){return this._openedSubviewID}}),e.set({openedSubview:function(t){return this._openedSubviewID=t}}),e.get({reverseParentPath:function(){return this.getReverseParentList(this),this._parentPath.reverse()}}),e.get({parentPath:function(){return this.getReverseParentList(this),this._parentPath}}),e.prototype.getReverseParentList=function(t){return null==t&&(t=null),this._parentPath=[],null!=(null!=t?t.parent:void 0)&&(this.getReverseParentList(t.parent),this._parentPath.push(t.id)),!1},e.prototype.createStart=function(t){return null==t&&(t=null),this.trigger(e.CREATE_START,this),this.create(),!1},e.prototype.create=function(t){return null==t&&(t=null),this.trigger(e.CREATE,this),this.createComplete(),!1},e.prototype.createComplete=function(t){return null==t&&(t=null),this._created=!0,this.trigger(e.CREATE_COMPLETE,this),!1},e.prototype.showStart=function(t){return null==t&&(t=null),this.trigger(e.SHOW_START,this),this.show(),!1},e.prototype.show=function(t){return null==t&&(t=null),this.trigger(e.SHOW,this),this.showComplete(),!1},e.prototype.showComplete=function(t){return null==t&&(t=null),this.trigger(e.SHOW_COMPLETE,this),!1},e.prototype.hideStart=function(t){return null==t&&(t=null),this.trigger(e.HIDE_START,this),this.hide(),!1},e.prototype.hide=function(t){return null==t&&(t=null),this.trigger(e.HIDE,this),this.hideComplete(),!1},e.prototype.hideComplete=function(t){return null==t&&(t=null),this.trigger(e.HIDE_COMPLETE,this),!1},e.prototype.destroy=function(t){var r;return null==t&&(t=null),this.removeAll(),null!=(r=this._parentPath)&&(r.length=0),this._parentPath=null,this._data=null,this.trigger(e.DESTROY,this),this.destroyComplete(),!1},e.prototype.destroyComplete=function(t){return null==t&&(t=null),this._created=!1,this.trigger(e.DESTROY_COMPLETE,this),this.off(),!1},e}(BaseDOM);var TemplateNode,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};TemplateNode=function(t){function e(t){this.nodeData=t,this._id=this.nodeData.id,this._external=this.nodeData.external,this._use=this.nodeData.use,this._attributes=this.nodeData.attributes,this._element=this.nodeData.element,this._content=this.nodeData.content,this._condition=this.nodeData.condition,this._children=[],this._contextSelector=this.nodeData.contextSelector,this._parseNode(this.nodeData)}return __extends(e,t),e.get({id:function(){return this._id}}),e.get({external:function(){return this._external}}),e.get({use:function(){return this._use}}),e.get({attributes:function(){return this._attributes}}),e.get({element:function(){return this._element}}),e.get({content:function(){return this._content}}),e.get({condition:function(){return this._condition}}),e.get({children:function(){return this._children}}),e.set({children:function(t){return this._children=t}}),e.prototype._parseNode=function(){},e.prototype.find=function(t,e){var r,n,s,i,o,a,l,h,c,u,p,d;for(null==t&&(t=null),null==e&&(e=null),n=null,u=this._children,a=0,h=u.length;h>a;a++)if(r=u[a],!t||r.element===t){if(e){s=!0;for(i in e)o=e[i],(!r.attributes[i]||(null!=(p=r.attributes[i])?p.indexOf(o):void 0)<0)&&(s=!1);if(!s)continue}n=r;break}if(!n)for(d=this._children,l=0,c=d.length;c>l&&(r=d[l],!(n=r.find(t,e)));l++);return n},e.prototype.clear=function(){var t,e;for(t=this._childContext.childNodes,e=[];this._childContext.childNodes.length;)e.push(this._childContext.removeChild(this._childContext.childNodes[0]));return e},e.prototype.render=function(t,e,r,n){var s,i,o,a,l,h,c,u;if(null==r&&(r=null),null==n&&(n=!1),!r&&e&&(r=e),this.originalData=r,o=e,!n&&this._use&&(l=/([\*\@])?(.*?)$/.exec(this._use))){if(o=this._findObjectData(o,this._use),null==o)return;Array.isArray(o)||"object"==typeof o?(e=o,this._content=""):this._content=o}if(this._contextSelector&&(t=(t||document.body).querySelector(this._contextSelector)),this.data=e,i=t,this._element&&(i=document.createElement(this._element),t.appendChild(i),i.templateNode=this),this._content&&(i.innerHTML=this._replaceData(this._content,e)),this._attributes){s=this._replaceData(this._attributes,e);for(a in s)h=s[a],h&&0!==h.length&&i.setAttribute(a,h)}if(!t)throw new Error("Context was not found.");if(!n&&this._use&&e&&Array.isArray(e))for(c=0,u=e.length;u>c;c++)h=e[c],this._renderChildren(i,h,r);else this._renderChildren(i,e,r);return this._childContext=i},e.prototype.update=function(t){var e,r,n;if(this.clear(),t&&("object"==typeof t||Array.isArray(t)))for(r=0,n=t.length;n>r;r++)e=t[r],this._renderChildren(this._childContext,e,t,!0);else this._renderChildren(this._childContext,t,t,!0);return this.data=t},e.prototype._replaceData=function(t,e){var r,n;for(t=JSON.stringify(t);r=/\#\{(.*?)\}/.exec(t);)n=ObjectUtils.findChild(e,r[1]),n||(n=""),t=t.replace(new RegExp("#\\{"+r[1]+"\\}","g"),n),t=t.replace(new RegExp("\r\n","g"),"\n"),t=t.replace(new RegExp("[\n|\r]","g"),"\\n");return JSON.parse(t)},e.prototype._findObjectData=function(t,e){var r;if(!t)return null;if(e&&(r=/([\*\@])?(.*?)$/.exec(e)))switch(r[1]){case"*":break;case"@":break;default:t=ObjectUtils.findChild(t,r[2])}return t},e.prototype._renderChildren=function(t,e,r,n){var s,i,o;for(null==n&&(n=!1),i=this._children.length,s=-1,o=[];++s<i;)o.push(this._children[s].render(t,e,r,n));return o},e}(EventDispatcher);var TemplateParser,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};TemplateParser=function(t){function e(t){null==t&&(t=null),this._replaceStringMultilines=__bind(this._replaceStringMultilines,this),this._replaceObject=__bind(this._replaceObject,this),this._parseObjectRecursive=__bind(this._parseObjectRecursive,this),this._loadComplete=__bind(this._loadComplete,this),this._externalTemplateLoadError=__bind(this._externalTemplateLoadError,this),this._externalTemplateLoaded=__bind(this._externalTemplateLoaded,this),this._replaceNodeExternals=__bind(this._replaceNodeExternals,this),this._loadExternalTemplates=__bind(this._loadExternalTemplates,this),this._templateLoadError=__bind(this._templateLoadError,this),this._templateLoadComplete=__bind(this._templateLoadComplete,this),e.rules||e._parseTemplateRules(),this._renderQueue=[],this._loaded=!1,this.id=t,t&&this.loadTemplate(t)}return __extends(e,t),e.LOAD_COMPLETE="templateParser_loadComplete",e.LOAD_ERROR="templateParser_loadError",e._parseTemplateRules=function(){var t,e,r,n;for(r=Template.RULES.replace(/^\s*$/g,""),t=/^[^\s].*?\n(^[\s+].*?(\n|$))+/gm,this._rules=[],n=[];e=t.exec(r);)n.push(this._parseBlock(e[0]));return n},e._parseBlock=function(t){var e,r,n,s;if(e=/^([^\s]+)\s*\:/.exec(t)){for(e=e[1],s={name:e},n=/^\s+([^\s]+)\s*\:\s*(.*?)\s*$/gm;r=n.exec(t);)s[r[1]]=r[2];return this._rules.push(s)}},e.get({loaded:function(){return this._loaded}}),e.prototype.parse=function(t){return this._templateLoadComplete(null,t)},e.prototype.loadTemplate=function(t,e){var r,n;return null==e&&(e=null),/\.tpl$/.test(t)||(t=t.replace(/\./,"/")+Template.EXTENSION),n=0!==t.indexOf("/")?Template.ROOT_PATH:"",r=n+t,API.call({url:r,onComplete:this._templateLoadComplete,onError:this._templateLoadError,type:"template"})},e.prototype.render=function(t,e){var r,n,s;if(this._loaded){for(n=this._nodes.length,r=-1,s=[];++r<n;)s.push(this._nodes[r].render(t,e));return s}return this._renderQueue.push(arguments)},e.prototype._templateLoadComplete=function(t,e){return e+="\n",this._externalTemplates=[],this._nodes=this._parseBlocks(e),this._loadExternalTemplates()},e.prototype._templateLoadError=function(){return this._loaded=!0,this.trigger(e.LOAD_ERROR)},e.prototype._findTemplate=function(t){var e,r;for(e=this._nodes.length;e-->0;)if((null!=(r=this._nodes[e])?r.id:void 0)===t)return this._nodes[e];return Template.find(t)},e.prototype._loadExternalTemplates=function(){var t,r,n;for(t=this._externalTemplates.length;t-->0;){if(r=this._externalTemplates[t],!this._findTemplate(r))return n=new e(this._externalTemplates[t]),n.on(e.LOAD_ERROR,this._externalTemplateLoadError),n.on(e.LOAD_COMPLETE,this._externalTemplateLoaded),Template.addTemplate(this._externalTemplates[t],n),void this._externalTemplates.splice(t,1);this._externalTemplates.splice(t,1)}return 0===this._externalTemplates.length?(this._replaceNodeExternals(this._nodes),this._loadComplete()):this._loadExternalTemplates()},e.prototype._replaceNodeExternals=function(t){var r,n,s,i;for(n=t.length,i=[];n-->0;)s=t[n],s.external&&(r=this._findTemplate(s.external),r&&(r instanceof e?s.children=r.nodes:r instanceof TemplateNode&&(s.children=r.children)),s.children&&0!==s.children.length||t.splice(n,1)),i.push(s.children.length?this._replaceNodeExternals(s.children):void 0);return i},e.prototype._externalTemplateLoaded=function(t){var r;return r=t.currentTarget,r instanceof e&&Template.addTemplate(r.id,r),this._loadExternalTemplates()},e.prototype._externalTemplateLoadError=function(t){return Template.addTemplate(t.target.id,""),this._loadExternalTemplates()},e.prototype._loadComplete=function(){var t,r;for(this._loaded=!0,t=this._nodes.length;t-->0;)this._nodes[t].id&&this._nodes.splice(t,1);for(r=this._renderQueue.length,t=-1;++t<r;)this.render.apply(this,this._renderQueue[t]);return this.trigger(e.LOAD_COMPLETE)},e.prototype._parseBlocks=function(t){var e,r,n,s,i,o,a;for(t=t.replace(/\/\*[\s\S]*?\*\//gm,""),t=t.replace(/^\s*$[\n|\r]/gm,""),e=/(^\s*)([^\s].*?\n)((?:\1\s[\s\S].*?(?:\n|$))*)/gm,i=this._escapeCharacters(t,this._escapeMap||[]),t=i[0],this._escapeMap=i[1],o=this._escapeLineBreaks(t,this._escapeMap),t=o[0],this._escapeMap=o[1],a=this._escapeConditionals(t,this._escapeMap),t=a[0],this._escapeMap=a[1],r=[];n=e.exec(t);)s=new TemplateNode(this._parseNodeData(n[2])),n[3]&&n[3].trim().length>0&&(s.children=this._parseBlocks(n[3])),r.push(s);return r},e.prototype._parseNodeData=function(t){var e,r,n,s,i,o,a,l,h,c,u,p,d,_,f,g,m,v,y,b;
if(v=this._escapeConditionals(t,this._escapeMap),t=v[0],s=v[1],f=/^([\>\<\!]?)(.*?)(\:(.*?))?$/m.exec(t),l={},f[1]&&f[1].length>0)switch(f[1]){case">":l.contextSelector=f[2];break;case"<":this._externalTemplates.push(f[2]),l.external=f[2],f[4]&&f[4].length>0&&(n=/^\s*\#\{(.*?)\}\s*$/.exec(this._unescapeCharacters(f[4],s)),l.content=f[4],n&&(l.use=n[1]));break;case"!":l.id=f[2];break;default:throw new Error("Couldn't parse node: "+f[0])}else{if(p=(this._unescapeCharacters(f[2],this._escapeMap)||"").trim(),o=(this._unescapeCharacters(f[4],this._escapeMap)||"").trim(),c=o,o=o.replace(/^([\'\"])(.*?)\1$/,"$2"),y=this._escapeDataObjects(p,this._escapeMap),d=y[0],this._escapeMap=y[1],b=this._parseObjectRecursive(d),d=b[0],e=b[1],d=this._unescapeCharacters(d,e),d=this._unescapeCharacters(d,this._escapeMap),i=/^\s*(\((?:if|for).*?)\)\s*$/.exec(d))l.condition=i[1];else{for(r=/([\.\#])?([\w\-]+)/g,d||(d=""),g=d.replace(/\{.*?\}/g,""),h=[],a=[];u=r.exec(g);)switch(u[1]){case".":a.push(u[2]);break;case"#":h.push(u[2]);break;default:l.element=u[2]}h.length&&(e.id||(e.id=""),e.id=[].concat(e.id.split(" "),h).join(" ").trim()),a.length&&(e["class"]||(e["class"]=""),e["class"]=[].concat(e["class"].split(" "),a).join(" ").trim());for(_ in e)m=e[_],e[_]=this._unescapeCharacters(m,this._escapeMap);l.attributes=e}l.element||l.condition||(l.element="div"),(null!=o?o.length:void 0)>0&&(l.content=o),o===c&&(n=/^\s*\#\{(.*?)\}\s*$/.exec(o))&&(l.use=n[1])}return l},e.prototype._parseObjectRecursive=function(t){var e,r,n;if(this._objData=[],e=/(\{.*?\})/.exec(t))try{e=JSON.parse(e[0])}catch(s){}for(e||(e={});/\{([^\{\}]*)\}/.test(t);)r=this._escapeCharacters(t,this._objData,"£££"),t=r[0],this._objData=r[1],n=this._escapeString(t,/(([\'\"])([^\2]*)\2)/,this._objData,"£££",3),t=n[0],this._objData=n[1],t=t.replace(/\{([^\{\}]*)\}/g,this._replaceObject);return t=t.replace(/\${3}\d+\£{3}/g,""),[t,e]},e.prototype._replaceObject=function(t,e){var r,n,s,i,o,a,l;for(s=this._objData.length,a={},r=/([^\:\,\{\}]+)\:([^\:\,\}]+)/gm;o=r.exec(e);)i=o[1].trim(),n=o[2].trim(),l=/^\-{3}(\d+)\-{3}$/.exec(n),a[i]=l&&this._objData[l[1]]?this._objData[l[1]]:this._unescapeCharacters(o[2].trim(),this._objData,"£££");return this._objData[s]=a,"---"+s+"---"},e.prototype._escapeString=function(t,e,r,n,s){var i,o;if(null==r&&(r=[]),null==n&&(n="---"),null==s&&(s=1),!e)throw new Error("Must define a RegExp object");for(i=r.length,null==n&&(n="---");o=e.exec(t);)t=t.replace(new RegExp(o[0].replace(/(\W)/g,"\\$1"),"g"),n+i+n),r[i++]=o[s],e.lastIndex=0;return[t,r]},e.prototype._escapeDataObjects=function(t,e){return null==e&&(e=[]),this._escapeString(t,/(\#\{[^\{\}]*\})/,e)},e.prototype._escapeConditionals=function(t,e){return null==e&&(e=[]),this._escapeString(t,/((?:\{([^\{\}]+)})|(?:\(([^\(\)]+)\)))/,e)},e.prototype._escapeCharacters=function(t,e,r){var n;return null==e&&(e=[]),null==r&&(r=null),n=this._escapeString(t,/(\\.)/,e,r),t=n[0],e=n[1],[t,e]},e.prototype._escapeLineBreaks=function(t,e){return t=t.replace(/(['"])([\s\S]*?)\1/g,this._replaceStringMultilines),this._escapeString(t,/(\+{3})/,e)},e.prototype._replaceStringMultilines=function(t){return t=t.replace(/^\s+/gm,""),t.replace(/\n/gm,"+++")},e.prototype._unescapeCharacters=function(t,e,r){var n,s,i,o,a;if(null==r&&(r="---"),t){for(i=r.replace(/(.)/g,"\\$1"),s=new RegExp(i+"(\\d+)"+i,"g");a=s.exec(t);)o=a[1],n=e[a[1]]||"",t=t.replace(new RegExp(i+o+i,"g"),n),s.lastIndex=0;return t}},e}(EventDispatcher);var Template;Template=function(){function t(){}return t.RULES="object:\n	start: \\{\n	end: \\}\n	content: \\:+\ndata: \n	start: \\#\\{\n	end: \\}\n	content: [^\\s]+\nif: \n	start: \\(if\n	end: \\)\nforin:\n	start: \\(for\\s+(\\w+)\\s+in\n	end: \\)\nforof: \n	start: \\(for\\s(\\w+)\\sof\n	end: \\)\nselector: \n	start: \\>\nreference: \n	start: \\<\n	content: [^\\s]+\nid: \n	start: \\!\n	content: [^\\s]+\nelement:\n	start: ^(\\w*)\\:\nsequence:\n	start: \\[\n	end: \\]",t.CACHE={},t.ROOT_PATH="",t.EXTENSION=".tpl",t.setRootPath=function(t){return null==t&&(t=""),this.ROOT_PATH=t},t.setExtension=function(t){return null==t&&(t=".tpl"),this.EXTENSION=t},t.addTemplate=function(t,e){var r;return e instanceof TemplateParser?r=e:(r=new TemplateParser,r.parse(e)),this.CACHE[t]=r,r},t.hasTemplate=function(e){return Boolean(t.CACHE[e])},t.renderTemplate=function(t,e,r,n,s){var i;return null==e&&(e=null),null==r&&(r={}),null==n&&(n=null),null==s&&(s=null),(i=this.find(t))?i.render(e,r,n,s):void 0},t.render=function(t,e,r,n,s){var i;return null==e&&(e=null),null==r&&(r={}),null==n&&(n=null),null==s&&(s=null),t?(this.CACHE[t]||(i=new TemplateParser(t),i.on(TemplateParser.LOAD_COMPLETE,this._loadComplete),this.CACHE[t]=i),i=this.CACHE[t],i.render(e,r,n,s)):void 0},t._loadComplete=function(){},t.find=function(t){return this.CACHE[t]},t}();var API,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};API=function(_super){function API(t,e,r,n,s){this.url=t,this.params=null!=e?e:null,this.method=null!=r?r:"POST",this.type=null!=n?n:"json",this.headers=null!=s?s:null,this._loaded=__bind(this._loaded,this),this.reuse=!1}return __extends(API,_super),API.COMPLETE="apiComplete",API.ERROR="apiError",API.ROOT_PATH="",API._request=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):void 0},API.call=function(t){var e,r,n,s,i,o,a,l;if(t&&(l=t.url))return r=t.data,s=t.method||"POST",i=t.onComplete||"POST",o=t.onError,a=t.type||"json",n=t.headers,e=new API(API.ROOT_PATH+l,r,"POST",a),i&&e.on(this.COMPLETE,i),o&&e.on(this.ERROR,o),e.load(),e},API.prototype.load=function(){var t,e,r,n,s,i,o;if(this.params instanceof FormData)this.method="POST",t=this.params;else if("POST"===this.method){t=new FormData,s=this.params;for(r in s)n=s[r],t.append(r,n)}else{t=[],i=this.params;for(r in i)n=i[r],t.push(r+"="+n)}if(this.req=API._request(),this.req.onreadystatechange=this._loaded,this.req.open(this.method,this.url,!0),this.headers){o=this.headers;for(e in o)n=o[e],this.req.setRequestHeader(e,n)}return this.req.send(t)},API.prototype.cancel=function(){return this.req&&(this.req.onreadystatechange=null,this.req.abort()),this.reuse?void 0:this.off()},API.prototype._loaded=function(e){var data,err;if(4===e.currentTarget.readyState){if(200===e.currentTarget.status)try{if(data=e.currentTarget.responseText,"function"==typeof this.type)data=this.type(data);else if("json"===this.type)data=eval("("+e.currentTarget.responseText+")");else try{data=eval("("+e.currentTarget.responseText+")")}catch(_error){data=e.currentTarget.responseText}(null!=data?data.error:void 0)?this.trigger(API.ERROR,data):this.trigger(API.COMPLETE,data)}catch(_error){err=_error,console.log(err),this.trigger(API.ERROR)}else this.trigger(API.ERROR);if(!this.reuse)return this.off()}},API}(EventDispatcher);var ServiceController,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ServiceController=function(t){function e(){this._callError=__bind(this._callError,this),this._callComplete=__bind(this._callComplete,this)}return __extends(e,t),e.getInstance=function(){return null!=e._instance?e._instance:e._instance=function(t,e,r){r.prototype=t.prototype;var n=new r,s=t.apply(n,e);return Object(s)===s?s:n}(e,arguments,function(){})},e.prototype.call=function(t,e){var r;return null==e&&(e=!0),e&&app.blocker.show(),r=API.call(t),r.path=t.url,r.hasBlocker=e,r.on(API.COMPLETE,this._callComplete),r.on(API.ERROR,this._callError),r},e.prototype.cancel=function(t){return t.cancel()},e.prototype.setURLParams=function(t,e,r){var n,s,i,o,a,l;if(null==e&&(e=null),null==r&&(r=!1),s=app.router.getParsedPath(),r){l=s.params||{};for(n in t)i=t[n],l[n]=i;if(e)for(o=0,a=e.length;a>o;o++)n=e[o],delete l[n]}else l=t;t=[];for(n in l)i=l[n],t.push(n+"="+encodeURIComponent(i));return app.router.replace(s.path+"?"+t.join("&"),null,!1)},e.prototype.getURLParams=function(){var t;return t=app.router.getParsedPath().params||{}},e.prototype._callComplete=function(t,e){var r;return t.target.hasBlocker&&app.blocker.hide(),e?(null!=e.__user&&app.user.setUser(e.__user),e["goto"]&&app.viewController.goto(e["goto"]),e.refresh&&app.viewController.goto(app.router.getCurrentPath()),e.__interface?(app.viewController.renderInterface("index",e.__interface,e),app.user.logged&&(r=app.router.getCurrentPath(),r||(r="/"),this.call({url:r}))):e.__view&&(app.viewController.addView(t.target.path,e.__view),app.viewController.renderView(t.target.path,e)),e.notification?app.notification.showNotifications(e.notification):void 0):void 0},e.prototype._callError=function(t){switch(t.target.hasBlocker&&app.blocker.hide(),t.code){case 1:app.viewController.getInterface();break;case 2:app.notification.showNotifications({message:t.message,type:1});break;case 101:app.notification.showNotifications({message:t.message,type:1})}return t.notification?app.notification.showNotifications(t.notification):void 0},e}(EventDispatcher);var ComponentController,components,__bind=function(t,e){return function(){return t.apply(e,arguments)}};components={},components.standalone={},ComponentController=function(){function t(t){null==t&&(t=document.body),this._parseStandalones=__bind(this._parseStandalones,this),this._domChanged=__bind(this._domChanged,this),this._mutationChanged=__bind(this._mutationChanged,this),this._sortComponents=__bind(this._sortComponents,this),this._listComponents=__bind(this._listComponents,this),this._target=t,this._listComponents(),MutationObserver?(this._mutationObserver=new MutationObserver(this._mutationChanged),this._mutationObserver.observe(t,{childList:!0,subtree:!0})):t.addEventListener("DOMSubtreeModified",this._domInserted)}return t.getInstance=function(){return null!=t._instance?t._instance:t._instance=function(t,e,r){r.prototype=t.prototype;var n=new r,s=t.apply(n,e);return Object(s)===s?s:n}(t,arguments,function(){})},t.prototype._listComponents=function(){var t,e,r,n;this._components=[];for(e in components)t=components[e],"standalone"!==e&&this._components.push(t);this._components=this._components.sort(this._sortComponents),this._standalones=[],r=components.standalone,n=[];for(e in r)t=r[e],n.push(this._standalones.push(t));return n},t.prototype._sortComponents=function(t,e){var r;return r=0,r=null!=t.ORDER?null!=e.ORDER?t.ORDER>e.ORDER?-1:t.ORDER<e.ORDER?1:0:-1:null!=e.ORDER?1:0},t.prototype.parse=function(t){null==t&&(t=null)},t.prototype._mutationChanged=function(t){var e,r,n,s,i,o,a,l,h,c,u;c=this._components;for(s in c)for(e=c[s],n=this._target.querySelectorAll(e.SELECTOR),o=0,l=n.length;l>o;o++)r=n[o],r.getInstance()||new e({element:r});for(setTimeout(this._parseStandalones,0),u=[],a=0,h=t.length;h>a;a++)i=t[a],u.push(function(){var t,e,n,s,o;for(n=i.removedNodes,o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(null!=(s=r.getInstance())?s.destroy():void 0);return o}());return u},t.prototype._domChanged=function(){var t,e,r,n,s,i,o,a,l;null==this._items&&(this._items=[]),a=this._components;for(s in a)for(t=a[s],n=target.querySelectorAll(t.SELECTOR),i=0,o=n.length;o>i;i++)r=n[i],r.getInstance()||(this._parseStandalones(r),this._items.push(new t({element:r})));for(e=this._items.length,l=[];e-->0;)r=this._items[e],r.element.parentNode?l.push(void 0):(r.destroy(),l.push(this._items[e].splice(e,1)));return l},t.prototype._parseStandalones=function(){var t,e,r,n,s;for(n=this._standalones,s=[],e=0,r=n.length;r>e;e++)t=n[e],s.push(t.parseDOM());return s},t}();var ViewController;ViewController=function(){function t(){this._body=new BaseDOM({element:document.querySelector("#wrapper")})}return t.getInstance=function(){return null!=t._instance?t._instance:t._instance=function(t,e,r){r.prototype=t.prototype;var n=new r,s=t.apply(n,e);return Object(s)===s?s:n}(t,arguments,function(){})},t.prototype.getInterface=function(t){return null==t&&(t=!1),app.serviceController.call({url:"index/view"})},t.prototype.addView=function(t,e){return Template.addTemplate(t,e)},t.prototype.renderInterface=function(t,e,r){var n;return this.addView("__interface",e),this.renderView("__interface",r,this._body),n=document.querySelector("main"),this._container=n?n.getInstance()||new BaseDOM({element:n}):null},t.prototype.renderView=function(t,e,r){return null==r&&(r=null),r||(r=this._container),r?(r instanceof BaseDOM&&(r.removeAll(),r=r.element),Template.renderTemplate(t,r,e),app.componentController.parse()):void 0},t.prototype.goto=function(t){return app.serviceController.call(Template.hasTemplate(t)?{url:t,__v:!1}:{url:t,__v:!0}),app.router.goto(t,null,!1)},t}();var User,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};User=function(t){function e(){this._pingComplete=__bind(this._pingComplete,this),this._ping=__bind(this._ping,this),this._firstTime=!0}return __extends(e,t),e.PING_TIMEOUT=10,e.get({name:function(){return this._name}}),e.get({id:function(){return this._id}}),e.get({role:function(){return this._role}}),e.get({roleName:function(){return this._roleName}}),e.get({logged:function(){return~~this._id}}),e.prototype.setUser=function(t){return null==t&&(t=null),t?this._id!==t.id&&(this._startPing(),this._name=t.name,this._id=t.id,this._role=t.role,this._roleName=t.roleName,this._firstTime||app.viewController.getInterface()):(this._stopPing(),this._name=null,this._id=null,this._role=null),this._firstTime=!1},e.prototype.logout=function(){return 1},e.prototype._startPing=function(){return this._pingTimeout=setTimeout(this._ping,1e3*e.PING_TIMEOUT)},e.prototype._stopPing=function(){return clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._ping=function(){return this._pingTimeout?app.serviceController.call({url:"user/ping",onComplete:this._pingComplete},!1):void 0},e.prototype._pingComplete=function(){return this._pingTimeout?this._startPing():void 0},e}(EventDispatcher);var Resizer,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Resizer=function(t){function e(){this._resize=__bind(this._resize,this),e.__super__.constructor.apply(this,arguments),window.addEventListener("resize",this._resize)}return __extends(e,t),e.getInstance=function(){return null!=e._instance?e._instance:e._instance=function(t,e,r){r.prototype=t.prototype;var n=new r,s=t.apply(n,e);return Object(s)===s?s:n}(e,arguments,function(){})},e.prototype._resize=function(){return this.trigger("resize")},e}(EventDispatcher);var Notification,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Notification=function(t){function e(){this._hideNotification=__bind(this._hideNotification,this),this._showNotification=__bind(this._showNotification,this),this.showNotification=__bind(this.showNotification,this),this.showNotifications=__bind(this.showNotifications,this),e.__super__.constructor.apply(this,arguments)}var r;return __extends(e,t),e.DEFAULT_TIMEOUT=8,e.prototype.destroy=function(){},e.prototype.showNotifications=function(t){var e,r,n,s,i;for(t=[].concat(t),e=t.length,i=[],n=0,s=t.length;s>n;n++)r=t[n],i.push(null!=r.delay?setTimeout(this.showNotification,1e3*r.delay,r):this.showNotification(r));return i},e.prototype.showNotification=function(t){var e;return e=document.querySelector("notification"),e||(e=document.body),e=e.getInstance()?e.getInstance():new BaseDOM({element:e}),t=new r(t),e.appendChildAt(t)},e.prototype._showNotification=function(t,e){return e=[].concat(e)},e.prototype._hideNotification=function(){},r=function(t){function r(t){this._closeClick=__bind(this._closeClick,this),this._hideNotification=__bind(this._hideNotification,this),r.__super__.constructor.call(this,{element:"div",className:"notification-item show-down"}),t.message&&(this.text=t.message),t.type&&this.addClass("p"+t.type),this.timeout=e.DEFAULT_TIMEOUT,t.timeout&&(this.timeout=Number(t.timeout)),this.timeout>0&&(this._closeTimeout=setTimeout(this._hideNotification,1e3*this.timeout)),this.closeBtn=new BaseDOM({element:"i",className:"closeBtn fa fa-close"}),this.closeBtn.element.on("click",this._closeClick),this.appendChild(this.closeBtn)}return __extends(r,t),r.prototype._hideNotification=function(){return this._hide()},r.prototype._hide=function(){return clearTimeout(this._closeTimeout),this.element.parentNode.removeChild(this.element),"function"==typeof this.destroy?this.destroy():void 0},r.prototype._closeClick=function(){return this._hide()},r}(BaseDOM),e}(EventDispatcher);var Blocker,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Blocker=function(t){function e(){this._transitionEnd=__bind(this._transitionEnd,this),e.__super__.constructor.call(this,{element:"div",className:"blocker"}),this.css({display:"none"}),this.element.on("transitionend",this._transitionEnd),this.element.on("moztransitionend",this._transitionEnd),this.element.on("otransitionend",this._transitionEnd),this.element.on("webkittransitionend",this._transitionEnd),this._showing=!1}return __extends(e,t),e.prototype.show=function(t){return null==t&&(t=!0),this._showing=!0,this.element.parentNode||document.body.appendChild(this.element),this.css({display:"block"}),this.addClass("show")},e.prototype.hide=function(){return this._showing=!1,this.removeClass("show")},e.prototype._transitionEnd=function(){return this._showing?void 0:this.css({display:"none"})},e}(BaseDOM);var StandaloneBase,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};StandaloneBase=function(t){function e(t){var r,n;r=(null!=t?t.__instance__:void 0)||(null!=t&&null!=(n=t.element)&&"function"==typeof n.getInstance?n.getInstance():void 0),e.__super__.constructor.apply(this,arguments),r&&(this._element.__instance__=r)}return __extends(e,t),e.parseDOM=function(){var t,e,r,n,s,i;for(null==this._parsedItems&&(this._parsedItems=[]),r=app.body.findAll(this.SELECTOR),n=[],s=0,i=r.length;i>s;s++)e=r[s],n.push(e),(t=this._parsedItems.indexOf(e))>=0?this._parsedItems.splice(t,1):new this({element:e});return this._parsedItems=n},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.standalone.Removable=function(t){function e(t){if(this._click=__bind(this._click,this),this._resize=__bind(this._resize,this),this._added=!1,this._lastTop=-8,this._lastLeft=0,this._target=t.element.element||t.element,!this._target)throw new Error("No target element for removable");e.__super__.constructor.call(this,{element:"span"}),this.addClass("removable"),this._target.parentNode.insertBefore(this.element,this._target),Resizer.getInstance().on("resize",this._resize),this._resize(),this.element.on("click",this._click)}return __extends(e,t),e.SELECTOR="[removable]",e.prototype._resize=function(){var t,e,r,n;return t=this._target.getBoundingClientRect(),r=this._target.parentNode.getBoundingClientRect(),e=t.left-r.left,n=t.top-r.top,this.css({top:n+8+"px",left:e+t.width-8+"px"})},e.prototype._click=function(){return this._remove()},e.prototype._remove=function(){return this._target.parentNode.removeChild(this._target),this.element.parentNode.removeChild(this.element),this.destroy(),Resizer.getInstance().trigger("resize")},e.prototype.destroy=function(){return e.__super__.destroy.apply(this,arguments),Resizer.getInstance().off("resize",this._resize),this.element.off("click",this._click)},e}(StandaloneBase);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.standalone.Clonable=function(t){function e(t){if(this._click=__bind(this._click,this),this._resize=__bind(this._resize,this),this._added=!1,this._lastTop=0,this._target=t.element.element||t.element,!this._target)throw new Error("No target element for cloneable");e.__super__.constructor.call(this,{element:"span"}),this.addClass("clonable"),this._target.parentNode.insertBefore(this.element,this._target),Resizer.getInstance().on("resize",this._resize),this._resize(),this.element.on("click",this._click)}return __extends(e,t),e.SELECTOR="[clonable]",e.prototype._resize=function(){var t;return t=this.getBounds(this._target),this.css({top:this._lastTop-t.top+"px"}),this._lastTop-=t.top},e.prototype._click=function(){return this._added?this._remove():this._clone(),this._added=!0,this.addClass("remove")},e.prototype._remove=function(){return this._target.parentNode.removeChild(this._target),this.element.parentNode.removeChild(this.element),this.destroy(),Resizer.getInstance().trigger("resize")},e.prototype._clone=function(){var t,e,r,n,s,i,o,a,l,h,c,u,p;for(o=this._target.parentNode,e=o.childNodes,r=e.length;r-->0;)if(e[r]===this._target){r++;break}for(i=!1,e.length<=r&&(i=!0),a=document.createElement("form"),this._target.templateNode.render(a,this._target.templateNode.originalData),a.reset(),s=a.querySelectorAll("input,textarea,select"),l=0,c=s.length;c>l;l++)switch(n=s[l],n.tagName.toLowerCase()){case"input":n.value="",n.checked=0,n.selected=0;break;case"textarea":n.value="",n.innerText="";break;case"select":n.value=""}for(p=a.childNodes,h=0,u=p.length;u>h;h++)t=p[h],i?o.appendChild(t):o.insertBefore(t,o.childNodes[r++]);return Resizer.getInstance().trigger("resize")},e.prototype.destroy=function(){return e.__super__.destroy.apply(this,arguments),Resizer.getInstance().off("resize",this._resize),this.element.off("click",this._click)},e}(StandaloneBase);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Table=function(t){function e(){this._dataLoaded=__bind(this._dataLoaded,this),this._headerClick=__bind(this._headerClick,this),this._parseHeader=__bind(this._parseHeader,this);var t;e.__super__.constructor.apply(this,arguments),this._values=(null!=(t=app.serviceController)?t.getURLParams():void 0)||{},this._parseHeader(),this._update=this.attr("update"),this._templateNode=this.element.templateNode,this._updateTargets(this._templateNode.data)}var r;return __extends(e,t),e.SELECTOR="table",e.prototype.destroy=function(){return this.removeAll(),this.off()},e.prototype._parseHeader=function(){var t,e,n,s,i;for(this._headers=[],e=this.findAll("thead th"),n=e.length,i=[];n-->0;)t=e[n],s=t.getAttribute("sort"),s&&0!==s.length&&(t=new r(t),t.on("click",this._headerClick),i.push(this._headers.push(t)));return i},e.prototype._headerClick=function(t,e){return this.update({sort:e})},e.prototype.update=function(t){var e,r,n;if(this._update){null!=(n=this._service)&&n.cancel();for(e in t){switch(r=t[e],e){case"search":delete this._values._index;break;case"sort":this._values.sort&&this._values.sort===r&&(r="-"+r)}this._values[e]=r}return app.serviceController.setURLParams(this._values),this._service=app.serviceController.call({url:this._update,onComplete:this._dataLoaded,data:this._values},!1)}},e.prototype._dataLoaded=function(t,e){var r;return null!=(r=this.element.templateNode.find("tbody"))&&r.update(e.items,e.items),this._updateTargets(e)},e.prototype._updateHeader=function(t){var e,r,n,s,i,o,a,l,h;for(s=/^(\-?)(.*?)$/.exec(t),e=1,(null!=(a=s[1])?a.length:void 0)>0&&(e*=-1),l=this._headers,h=[],i=0,o=l.length;o>i;i++)n=l[i],r=0,s[2]===n.value&&(r=e),h.push(n.update(r));return h},e.prototype._updateTargets=function(t){var e,r,n,s,i,o;for(r=document.querySelectorAll('[for="'+this.attr("id")+'"]'),this._updateHeader(this._values.sort),o=[],n=0,s=r.length;s>n;n++)e=r[n],o.push(null!=(i=e.getInstance())&&"function"==typeof i.update?i.update(t,this._values):void 0);return o},r=function(t){function e(t){this._click=__bind(this._click,this),e.__super__.constructor.call(this,{element:t}),this.css({cursor:"pointer"}),this._icon=new BaseDOM({element:"i",className:"sort-icon"}),this.appendChild(this._icon),this.element.on("click",this._click),this._value=this.attr("sort"),this._direction=0}return __extends(e,t),e.get({value:function(){return this._value}}),e.prototype.update=function(t){return null==t&&(t=0),1===t?(this._icon.addClass("down"),this._icon.removeClass("up")):-1===t?(this._icon.addClass("up"),this._icon.removeClass("down")):(this._icon.removeClass("down"),this._icon.removeClass("up")),this._direction=t},e.prototype._click=function(){return this.trigger("click",this._value)},e}(BaseDOM),e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.SearchInput=function(t){function e(){this._updateTarget=__bind(this._updateTarget,this),this._update=__bind(this._update,this),e.__super__.constructor.apply(this,arguments),this._checkAttributes(),this.element.on("change",this._update),this.element.on("keydown",this._update),this.element.on("keyup",this._update)}return __extends(e,t),e.SELECTOR="input.search",e.ORDER=0,e.prototype.destroy=function(){},e.prototype.update=function(t,e){return(null!=e?e.search:void 0)?this.attr("value",e.search):void 0},e.prototype._checkAttributes=function(){return this.attr("maxlength")?(this._maxLength=Number(this.attr("maxlength")),this._charCounter=new CharCounter(this._maxLength),this.element.parentNode.appendChild(this._charCounter)):void 0},e.prototype._update=function(){var t;return t=this.element.value.trim().toLowerCase(),t!==this._value?(clearTimeout(this._updateTimeout),this._value=t,this._updateTimeout=setTimeout(this._updateTarget,300)):void 0},e.prototype._updateTarget=function(){var t;return this._target||(this._target=null!=(t=document.getElementById(this.attr("for")))?t.getInstance():void 0),this._target?this._target.update({search:this._value}):void 0},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Pagination=function(t){function e(){this._updateTarget=__bind(this._updateTarget,this),this._lastClick=__bind(this._lastClick,this),this._firstClick=__bind(this._firstClick,this),this._nextClick=__bind(this._nextClick,this),this._prevClick=__bind(this._prevClick,this),this._pageClick=__bind(this._pageClick,this),this._create=__bind(this._create,this),e.__super__.constructor.apply(this,arguments),this._templateNode=this.element.templateNode,this._pageTemplate=this._templateNode.find("button",{"class":"page"}),this._currentPage=0,setTimeout(this._create,0)}return __extends(e,t),e.SELECTOR=".pagination",e.NUM_VISIBLE_PAGES=15,e.prototype._create=function(){var t,e,r,n,s,i;return this._prevBtn=this.find(".prev",!0),this._nextBtn=this.find(".next",!0),this._firstBtn=this.find(".first",!0),this._lastBtn=this.find(".last",!0),null!=(t=this._prevBtn)&&t.element.on("click",this._prevClick),null!=(e=this._nextBtn)&&e.element.on("click",this._nextClick),null!=(r=this._firstBtn)&&r.element.on("click",this._firstClick),null!=(n=this._lastBtn)&&n.element.on("click",this._lastClick),this._pagesContainer=new BaseDOM({element:"span"}),null!=(s=this._nextBtn)&&s.element.parentNode.insertBefore(this._pagesContainer.element,null!=(i=this._nextBtn)?i.element:void 0),this.update(this._templateNode.data)},e.prototype.destroy=function(){return this.removeAll(),this.off()},e.prototype.update=function(t){return this._total=t.total,this._numItems=t.numItems,this._currentPage=t.index/this._numItems,this._totalPages=Math.ceil(this._total/this._numItems),this.goto(this._currentPage)},e.prototype.goto=function(t){var e,r,n,s,i,o,a,l;return 0>=t?(t=0,null!=(e=this._prevBtn)&&e.enable(!1),null!=(r=this._firstBtn)&&r.enable(!1)):(null!=(n=this._prevBtn)&&n.enable(!0),null!=(s=this._firstBtn)&&s.enable(!0)),t>=this._totalPages-1?(t=this._totalPages-1,null!=(i=this._nextBtn)&&i.enable(!1),null!=(o=this._lastBtn)&&o.enable(!1)):(null!=(a=this._nextBtn)&&a.enable(!0),null!=(l=this._lastBtn)&&l.enable(!0)),this._currentPage!==t&&(this._currentPage=t,this._updateTarget()),this._buildPages()},e.prototype._buildPages=function(){var t,r,n,s,i,o,a;for(this._clear(),r=e.NUM_VISIBLE_PAGES>>1,n=this._currentPage-r,n+e.NUM_VISIBLE_PAGES>=this._totalPages&&(n=this._totalPages-e.NUM_VISIBLE_PAGES),0>n&&(n=0),t=n+e.NUM_VISIBLE_PAGES,t>=this._totalPages&&(t=this._totalPages),a=[],i=o=n;t>=n?t>o:o>t;i=t>=n?++o:--o)s=this._pageTemplate.render(this._pagesContainer.element,{page:(i+1).toString()},null,!0),s?(s=s.getInstance()||new BaseDOM({element:s}),s.value=i,a.push(i===this._currentPage?s.addClass("selected p3"):s.element.on("click",this._pageClick))):a.push(void 0);return a},e.prototype._pageClick=function(t){return this.goto(t.currentTarget.getInstance().value)},e.prototype._clear=function(){var t,e,r,n;for(e=this._pagesContainer.findAll("*",!0),r=0,n=e.length;n>r;r++)t=e[r],"function"==typeof t.off&&t.off(),"function"==typeof t.destroy&&t.destroy();return this._pagesContainer.removeAll()},e.prototype._prev=function(){return this.goto(this._currentPage-1)},e.prototype._next=function(){return this.goto(this._currentPage+1)},e.prototype._prevClick=function(){return this._prev()},e.prototype._nextClick=function(){return this._next()},e.prototype._firstClick=function(){return this.goto(0)},e.prototype._lastClick=function(){return this.goto(this._totalPages-1)},e.prototype._updateTarget=function(){var t;return this._target||(this._target=null!=(t=document.getElementById(this.attr("for")))?t.getInstance():void 0),this._target?this._target.update({_index:this._currentPage*this._numItems}):void 0},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Input=function(t){function e(){this._blur=__bind(this._blur,this),this._update=__bind(this._update,this),this._focus=__bind(this._focus,this),e.__super__.constructor.apply(this,arguments),this._checkAttributes(),this.element.on("focus",this._focus),this.element.on("blur",this._blur),this.element.on("change",this._update),this.element.on("keydown",this._update),this.element.on("keyup",this._update)
}var r;return __extends(e,t),e.SELECTOR="input,select,textarea",e.prototype.destroy=function(){},e.prototype._checkAttributes=function(){return this.attr("maxlength")?(this._maxLength=Number(this.attr("maxlength")),this._charCounter=new r(this._maxLength),this.element.parentNode.appendChild(this._charCounter)):void 0},e.prototype.showError=function(t){var e,r;return null!=(e=this.findParents("field"))&&null!=(r=e.getInstance())&&r.showError(t),this.addClass("error")},e.prototype.clearError=function(){return this.removeClass("error")},e.prototype._focus=function(){var t,e;return this._charCounter&&this._charCounter.show(),null!=(t=this.findParents("field"))&&null!=(e=t.getInstance())&&e.addClass("focused"),this._update()},e.prototype._update=function(){var t,e;return t=this.element.value,null!=(e=this._charCounter)?e.update(t.length):void 0},e.prototype._blur=function(){var t,e,r;return null!=(t=this.findParents("field"))&&null!=(e=t.getInstance())&&e.removeClass("focused"),null!=(r=this._charCounter)?r.hide():void 0},r=function(t){function e(t){this._maxLength=t,e.__super__.constructor.call(this,{element:"span",className:"charCounter hidden"}),this.css({position:"absolute",right:"0px",top:"0px"})}return __extends(e,t),e.prototype.update=function(t){return this._currentLength=t,this.text=this._maxLength-this._currentLength},e.prototype.show=function(){return this.removeClass("hidden"),this.addClass("show-up"),this.removeClass("hide-up")},e.prototype.hide=function(){return this.addClass("hide-up"),this.removeClass("show-up")},e}(BaseDOM),e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Form=function(t){function e(){this._showErrors=__bind(this._showErrors,this),this._submitError=__bind(this._submitError,this),this._submitComplete=__bind(this._submitComplete,this),this._submit=__bind(this._submit,this),e.__super__.constructor.apply(this,arguments),this.element.on("submit",this._submit)}return __extends(e,t),e.SELECTOR="form",e.prototype.destroy=function(){return this.element.on("submit",this._submit),this.removeAll(),this.off()},e.prototype.addComponent=function(){},e.prototype.removeComponent=function(){},e.prototype._submit=function(t){var e;return t.stopPropagation(),t.preventDefault(),e=new FormData(this.element),app.serviceController.call({url:this.attr("action"),data:e,onComplete:this._submitComplete,onError:this._submitError})},e.prototype._submitComplete=function(){var t;return"function"==typeof(t=this.element).reset?t.reset():void 0},e.prototype._submitError=function(t,e){switch(this._clearErrors(),null!=e?e.code:void 0){case 101:return this._showErrors(e.data)}},e.prototype._clearErrors=function(){var t,e,r,n,s,i,o,a,l;for(e=this.findAll(components.Field.SELECTOR,!0),s=0,o=e.length;o>s;s++)t=e[s],t.clearError();for(n=this.findAll(components.Input.SELECTOR,!0),l=[],i=0,a=n.length;a>i;i++)r=n[i],l.push(r.clearError());return l},e.prototype._showErrors=function(t){var e,r,n,s,i,o,a;for(a=[],i=0,o=t.length;o>i;i++)s=t[i],r=[].concat(s.field),a.push(function(){var t,i,o,a;for(a=[],t=0,i=r.length;i>t;t++)e=r[t],n=this.find('[name="'+e+'"]'),a.push(null!=n&&null!=(o=n.getInstance())?o.showError(s.message):void 0);return a}.call(this));return a},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Field=function(t){function e(){this._showErrors=__bind(this._showErrors,this),this._submitError=__bind(this._submitError,this),this._submitComplete=__bind(this._submitComplete,this),this._submit=__bind(this._submit,this),e.__super__.constructor.apply(this,arguments),this.element.on("submit",this._submit),this._name=this.attr("name")}return __extends(e,t),e.SELECTOR="field",e.get({name:function(){return this._name}}),e.set({name:function(t){return this._name=t}}),e.prototype.destroy=function(){return this.element.on("submit",this._submit),this.removeAll(),this.off()},e.prototype.addComponent=function(){},e.prototype.removeComponent=function(){},e.prototype._submit=function(t){var e;return t.stopPropagation(),t.preventDefault(),e=new FormData(this.element),app.serviceController.call({url:this.attr("action"),data:e,onComplete:this._submitComplete,onError:this._submitError})},e.prototype._submitComplete=function(){var t;return"function"==typeof(t=this.element).reset?t.reset():void 0},e.prototype._submitError=function(t,e){switch(null!=e?e.code:void 0){case 101:return this._showErrors(e.data)}},e.prototype._showErrors=function(){},e.prototype.clearError=function(){var t,e;return null!=(t=this._errorContainer)&&t.css("display","none"),null!=(e=this._errorContainer)?e.html="":void 0},e.prototype.showError=function(t){var e;return this._errorContainer||(this._errorContainer=new BaseDOM({element:"div",className:"p1 error-container"}),e=this.find(components.Input.SELECTOR),this.element.insertBefore(this._errorContainer.element,e)),this._errorContainer.css("display","block"),this._errorContainer.html+=t+"<br>"},e}(BaseDOM);var chart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};chart||(chart={}),chart.RendererBase=function(t){function e(t){null==t&&(t=null),this._type=t,e.__super__.constructor.call(this,{element:"canvas"}),this.attr({width:"100%",height:"100%"}),this.context=this.element.getContext("2d")}return __extends(e,t),e._colors=["#ff0000","#00ff00","#0000ff"],e.prototype.update=function(t){if(!t)throw new Error(t+" is not renderable");return this._data=t,this._update(),this._redraw()},e.prototype.resize=function(t,e){return this._width=t,this._height=e,this.attr({width:this._width+"px",height:this._height+"px"}),this._redraw()},e.prototype.redraw=function(){return this._redraw()},e.prototype.destroy=function(){return this._destroy()},e.prototype._update=function(){throw new Error("Please implement this method")},e.prototype._redraw=function(){throw new Error("Please implement this method")},e.prototype._destroy=function(){throw new Error("Please implement this method")},e}(BaseDOM);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};chart.BarChart=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._update=function(){},e.prototype._redraw=function(){var t,e,r,n,s,i,o,a,l,h,c,u,p,d,_,f,g,m,v,y,b,E;if(this._data){for(this._height<.5*this._width&&(this._height=.5*this._width,this.attr("height",this._height)),s=this.constructor._colors,a=this._data.data,h=a.length,f=this._data.values,c=f.length,t=this._width/h>>0,e=.5*t/c,4>e&&(e=4),e>>=0,l=0,g=0,y=a.length;y>g;g++)for(o=a[g],m=0,b=f.length;b>m;m++)_=f[m],d=o[_],d>l&&(l=d);for(l=1/l,p=0,v=0,E=a.length;E>v;v++){o=a[v],u=p+.5*(t-(c*e+(c-1)))>>0;for(r in f)_=f[r],n=s[r],this.context.beginPath(),this.context.fillStyle=n,i=o[_]*l*this._height,this.context.shadowColor="#999999",this.context.shadowBlur=2,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.fillRect(u,this._height-i,e,i),this.context.fill(),u+=e+1;p+=t}return this.context.beginPath(),this.context.fillStyle=null,this.context.lineStyle="#CCCCCC",this.context.rect(0,0,this._width,this._height),this.context.stroke(),this.context.closePath()}},e}(chart.RendererBase);var chart,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};chart||(chart={}),chart.Chart=function(t){function e(){this._resize=__bind(this._resize,this);var t,r,n;if(e.__super__.constructor.apply(this,arguments),n=this.attr("type")||"bar",t=/(^.*?)(?:\_(.*?))?$/.exec(n),this._type=t[1],this._subtype=t[2],r=chart.Chart.getRenderer(this._type),!r)throw new Error("Couldn't find chart renderer of type: "+this._type);this._renderer=new r(this._subtype),this.appendChild(this._renderer),window.addEventListener("resize",this._resize),this._resize()}return __extends(e,t),e.getRenderer=function(t){return t=t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()+"Chart",chart[t]},e._parseData=function(t){return null!=(null!=t?t.header:void 0)&&null!=(null!=t?t.data:void 0)?this._parseDataRecursive(t.header,t.data):void 0},e._parseDataRecursive=function(t,e){var r,n,s,i;if(!Array.isArray(t))return null;r=Array.isArray(null!=t?t[0]:void 0),s=r?[]:{};for(n in t)i=t[n],r||(s[i.name]=this._parseDataObject(i,e[n]));return s},e._parseDataObject=function(t,e){var r,n,s,i;if(!Array.isArray(e)||null==(null!=t?t.values:void 0))return e;for(n=[],s=0,i=e.length;i>s;s++)r=e[s],n.push(this._parseDataRecursive(t.values,r));return n},e.COLORS=[],e.get({type:function(){return this._type}}),e.set({type:function(t){return this._type=t}}),e.prototype._resize=function(){var t,e,r,n;return t=this.getBounds(),r=t.width>>0,e=t.height>>0,r!==this._prevWidth||e!==this._prevHeight?(this._prevWidth=r,this._prevHeight=e,null!=(n=this._renderer)&&"function"==typeof n.resize?n.resize(this._prevWidth,this._prevHeight):void 0):void 0},e.prototype.update=function(t){if(this._data=chart.Chart._parseData(t),!this._data)throw new Error("Data is not parseable",t);return this._renderer.update(this._data)},e.prototype._parseData=function(){},e}(BaseDOM);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Chart=function(t){function e(){e.__super__.constructor.apply(this,arguments),this._templateNode=this.element.templateNode,this.update(this._templateNode.data)}return __extends(e,t),e.SELECTOR="chart",e.ORDER=0,e}(chart.Chart);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Button=function(t){function e(){this._click=__bind(this._click,this),e.__super__.constructor.apply(this,arguments),this._enabled=!0,this.element.on("click",this._click)}return __extends(e,t),e.SELECTOR="button",e.prototype.destroy=function(){return this.removeAll(),this.off(),this.element.off("click",this._click)},e.prototype.enable=function(t){return null==t&&(t=!0),t?this.removeClass("disabled"):this.addClass("disabled"),this._enabled=t},e.prototype._click=function(t){this._enabled||(t.preventDefault(),t.stopPropagation()),this.attr("confirm")&&(confirm(this.attr("confirm"))||(t.stopPropagation(),t.preventDefault()))},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.Anchor=function(t){function e(){this._click=__bind(this._click,this);var t;return e.__super__.constructor.apply(this,arguments),t=this.attr("href"),t&&0!==t.length?void this.element.on("click",this._click):void this.element.removeAttribute("href")}return __extends(e,t),e.SELECTOR="a[href],button[href]",e.ORDER=0,e.prototype.destroy=function(){return this.removeAll(),this.off(),this.element.off("click",this._click)},e.prototype._click=function(t){var e,r;return e=this.attr("href"),this.attr("confirm")&&!confirm(this.attr("confirm"))?(t.stopPropagation(),void t.preventDefault()):!e||/^http/i.test(e)||/blank/i.test((null!=(r=this.attr("target"))?r.toLowerCase():void 0)||"")?void("button"===this.element.tagName.toLowerCase()&&window.open(e,this.attr("target"))):(t.stopPropagation(),t.preventDefault(),app.viewController.goto(e))},e}(BaseDOM);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};components.ActionButton=function(t){function e(){this._click=__bind(this._click,this),e.__super__.constructor.apply(this,arguments),this._enabled=!0,this.element.on("click",this._click)}return __extends(e,t),e.SELECTOR="button[action]",e.ORDER=0,e.prototype.destroy=function(){return this.removeAll(),this.off(),this.element.off("click",this._click)},e.prototype.enable=function(t){return null==t&&(t=!0),t?this.removeClass("disabled"):this.addClass("disabled"),this._enabled=t},e.prototype._click=function(t){return this._enabled?this.attr("confirm")&&!confirm(this.attr("confirm"))?(t.stopPropagation(),void t.preventDefault()):(app.serviceController.call({url:this.attr("action")}),t.stopPropagation(),t.preventDefault()):(t.preventDefault(),void t.stopPropagation())},e}(BaseDOM);var Main,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Main=function(){function t(){this._loadComplete=__bind(this._loadComplete,this),this._error=__bind(this._error,this),this._indexComplete=__bind(this._indexComplete,this),this._routeChange=__bind(this._routeChange,this);var t;app.body=new BaseDOM({element:document.body}),app.basePath=(null!=(t=document.querySelector("base"))?t.getAttribute("href"):void 0)||"",Template.setRootPath(app.basePath+"../api/view/cms/"),Template.setExtension(""),app.blocker=new Blocker,API.ROOT_PATH=app.basePath+"../api/cms/",app.serviceController=ServiceController.getInstance(),app.user=new User,app.router=new NavigationRouter,app.router.init(app.basePath),app.router.on(NavigationRouter.CHANGE,this._routeChange),app.componentController=ComponentController.getInstance(),app.viewController=ViewController.getInstance(),app.viewController.getInterface(),app.notification=new Notification,app.componentController.parse()}return t.prototype._routeChange=function(t,e){return app.serviceController.call({url:e.path})},t.prototype._indexComplete=function(){},t.prototype._error=function(){},t.prototype._loadComplete=function(){},t}(),app.on(App.WINDOW_LOAD,function(){return new Main})}).call(this);